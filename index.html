<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>波场TRX币</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="波场TRX币">
<meta property="og:url" content="http://www.trxbi.com/index.html">
<meta property="og:site_name" content="波场TRX币">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="波场TRX币">
<meta name="twitter:creator" content="@coolwuxing">
  
    <link rel="alternative" href="/atom.xml" title="波场TRX币" type="application/atom+xml">
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700|Open+Sans:700,400" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-43935113-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
<!-- Baidu Analytics -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?cb925fa900fb107efad8d43d1e78d73e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- End Baidu Analytics -->


</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <div id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <div id="header-title">
        <h1 id="logo-wrap">
          <a href="/" id="logo">波场TRX币
          
          </a>
        </h1>
      </div>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="https://www.huobi.co/zh-cn/topic/invited/?invite_code=34sb3">买币</a>
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.trxbi.com"></form>
      </div>
    </div>
  </div>
</div>
      <div id="main-wrap" class="outer">
        <section id="main">
  
    <article id="post-tron/波场去中心化交易所" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/波场去中心化交易所/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/波场去中心化交易所/">波场去中心化交易所</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="波场去中心化交易所"><a href="#波场去中心化交易所" class="headerlink" title="波场去中心化交易所"></a>波场去中心化交易所</h1><p><a href="#1">1.什么是交易对（Exchange）</a>\<br><a href="#2">2.创建交易对</a>\<br><a href="#3">3.交易（Transaction）</a>\<br><a href="#4">4.注资（Inject）</a>\<br><a href="#5">5.撤资（withdraw）</a></p>
<h2 id="1-什么是交易对（Exchange）"><a href="#1-什么是交易对（Exchange）" class="headerlink" title="1.什么是交易对（Exchange）"></a><h2 id="1">1.什么是交易对（Exchange）</h2></h2><p>TRON网络原生支持去中心化交易所。去中心化交易所由多个交易对构成。一个交易对（Exchange）是token与token之间，或者token与TRX之间的交易市场（Exchange Market）。<br>任何账户都可以创建任何token之间的交易对，即使TRON网络中已经存在相同的交易对。交易对的买卖与价格波动遵循Bancor协议。<br>TRON网络规定，所有交易对中的两个token的权重相等，因此它们数量（balance）的比率即是它们之间的价格。<br>举一个简单的例子，假设一个交易对包含ABC和DEF两种token，ABC的balance为1000万，DEF的balance为100万，由于权重相等，因此10 ABC = 1 DEF，也就是说，当前ABC对于DEF的价格为10ABC/DEF。</p>
<h2 id="2-创建交易对"><a href="#2-创建交易对" class="headerlink" title="2.创建交易对"></a><h2 id="2">2.创建交易对</h2></h2><p>任何账户都可以创建任何token之间的交易对。创建交易对的手续费是1024TRX，这个手续费会被TRON网络烧掉。<br>创建交易对相当于为该交易对注入（inject）原始资本，因此创建者账户中要拥有该交易对的初始balance。当创建成功后，会立即从创建者账户中扣除这两个token的balance。<br>创建交易对的合约是ExchangeCreateContract，该合约有4个参数：</p>
<ul>
<li>first_token_id，第1种token的id   </li>
<li>first_token_balance，第1种token的balance   </li>
<li>second_token_id，第2种token的id   </li>
<li>second_token_balance，第2种token的balance   </li>
</ul>
<p>其中token的id由token的name得到，具体概念请参见token发行相关部分的文档。如果交易对中包含TRX，则使用”_”表示TRX的id。需要注意的是，TRX的单位是sun，即10-6 TRX。<br>例子：<br><code>ExchangeCreate abc 10000000 _ 1000000000000</code><br>该交易会创建abc与TRX之间的交易对，初始balance分别为10000000个abc和1000000000000 sun（1000000TRX），<br>如果创建者没有足够的abc和TRX，则交易对创建失败；否则创建者账户中立即扣除相应的abc和TRX，交易对创建成功，可以开始交易。     </p>
<h2 id="3-交易（Transaction）"><a href="#3-交易（Transaction）" class="headerlink" title="3.交易（Transaction）"></a><h2 id="3">3.交易（Transaction）</h2></h2><p>任何账户都可以在任何交易对中进行交易。交易量和价格完全遵循Bancor协议。也就是说，一个账户在交易时，交易的对象是exchange。交易是即时的，不需要挂单和抢单，只要有足够的token，就可以交易成功。<br>交易的合约是ExchangeTransactionContract，该合约有3个参数：     </p>
<ul>
<li>exchange_id，交易对的id，TRON网络会根据交易对创建时间顺序给每个交易对唯一的id</li>
<li>token_id，要卖出的token的id</li>
<li>quant，要卖出的token的金额</li>
<li>expected，期望得到的另一个token的最小金额。如果小于此数值，交易不会成功</li>
</ul>
<p>例子：<br>我们在刚刚创建的abc与TRX的交易对中进行交易，假设此交易对id为1，当前交易对中abc balance为10000000，TRX balance为1000000，如果期望花100个TRX买到至少990个abc，则<br><code>ExchangeTransaction 1 _ 100 990</code><br>其中”_”表示TRX，即向交易对卖出100个TRX。如果成功，该交易会使得交易对中增加100个TRX，并根据Bancor协议计算出减少的abc的数量，交易对创建者的账户中abc和TRX的数量会相应地增加和减少。</p>
<h2 id="4-注资（Inject）"><a href="#4-注资（Inject）" class="headerlink" title="4.注资（Inject）"></a><h2 id="4">4.注资（Inject）</h2></h2><p>当一个交易对其中1种token的balance很小时，只需要很小的交易量就会造成很大的价格波动，这不利于正常交易。为了避免这种情况，该交易对的创建者可以选择向该交易对注资（inject）。<br>一个交易对只能由该交易对的创建者来注资。注资不需要手续费。<br>注资需要指定一种token以及注资金额，TRON网络会自动根据当前交易对中两种token的比例，计算出另一个token所需的金额，从而保证注资前后，交易对中两个token的比例相同，价格没有变化。<br>与创建交易对相同，注资要求创建者拥有足够多的两种token的balance。<br>注资的合约是ExchangeInjectContract，该合约有3个参数： </p>
<ul>
<li>exchange_id，交易对的id</li>
<li>token_id，要注资的token的id</li>
<li>quant，要注资的token的金额</li>
</ul>
<p>例子：<br>我们对刚刚创建的abc与TRX的交易对进行注资，假设此交易对id为1（TRON网络中第1个交易对），当前交易对中abc balance为10000000，TRX balance为1000000，如果要增加10%的abc，则<br><code>ExchangeInject 1 abc 1000000</code><br>如果成功，该交易会使得交易对中增加1000000个abc，并增加100000个TRX，交易对创建者的账户中abc和TRX的数量会相应地减少。</p>
<h2 id="5-撤资（withdraw）"><a href="#5-撤资（withdraw）" class="headerlink" title="5.撤资（withdraw）"></a><h2 id="5">5.撤资（withdraw）</h2></h2><p>一个交易对中的所有资产都是创建者的。创建者可以随时撤资（withdraw），把交易对中的token赎回到自身账户中。一个交易对只能由该交易对的创建者来撤资。撤资不需要手续费。<br>和注资一样，撤资需要指定一种token以及撤资金额，TRON网络会自动根据当前交易对中两种token的比例，计算出另一个token撤资的金额，从而保证撤资前后，交易对中两个token的比例相同，价格没有变化。<br>【风险提示】撤资前后价格没有变化，但是价格波动会更大<br>撤资的合约是ExchangeWithdrawContract，该合约有3个参数：    </p>
<ul>
<li>exchange_id，交易对的id</li>
<li>token_id，要撤资的token的id</li>
<li>quant，要撤资的token的金额</li>
</ul>
<p>例子：<br>我们对之前创建的abc与TRX的交易对进行撤资，假设此交易对id为1，当前交易对中abc balance为10000000，TRX balance为1000000，如果要赎回10%的abc，则<br><code>ExchangeWithdraw 1 abc 1000000</code><br>如果成功，该交易会使得交易对中减少1000000个abc，以及减少100000个TRX，交易对创建者的账户中abc和TRX的数量会相应地增加。</p>
<h3 id="6、查询交易对及价格信息"><a href="#6、查询交易对及价格信息" class="headerlink" title="6、查询交易对及价格信息"></a>6、查询交易对及价格信息</h3><h4 id="6-1、-查询交易"><a href="#6-1、-查询交易" class="headerlink" title="6.1、 查询交易"></a>6.1、 查询交易</h4><p>有三个查询交易对的接口，包括：查询所有交易对信息（ListExchanges）、分页查询交易对信息（GetPaginatedExchangeList）(Odyssey-v3.1.1暂不支持)，查询指定交易对信息（GetExchangeById）。<br>相关api详情，请查询<a href="波场钱包RPC-API.md">波场RPC-API说明</a>。</p>
<h4 id="6-2、-计算当前价格"><a href="#6-2、-计算当前价格" class="headerlink" title="6.2、 计算当前价格"></a>6.2、 计算当前价格</h4><p>交易中token的当前价格信息的计算过程：\<br>假设 first_token 当前的价格为 100 Sun，first_token_balance 为1000_000,second_token_balance 为2000_000，\<br>second_token 当前的价格为 first_token*first_token_balance/second_token_balance = 50 Sun \<br>first_token的价格可有”first_token&amp;&amp;TRX”交易对计算获得。</p>
<h4 id="6-3、-计算交易获得token量"><a href="#6-3、-计算交易获得token量" class="headerlink" title="6.3、 计算交易获得token量"></a>6.3、 计算交易获得token量</h4><p>交易中花费first_token置换获得的second_token的数量的计算过程：\<br>假设 sellTokenQuant是要卖出的first_token的金额，buyTokenQuant是要买入的second_token的金额。</p>
<p>supply = 1_000_000_000_000_000_000L；\<br>supplyQuant = -supply <em> (1.0 - Math.pow(1.0 + (double) sellTokenQuant/（firstTokenBalance + sellTokenQuant）, 0.0005)); \<br>buyTokenQuant = （long）balance </em> (Math.pow(1.0 + (double) supplyQuant / supply, 2000.0) - 1.0)；</p>
<p>注意：由于网络其他账户发生交易，价格可能发生变化。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/波场去中心化交易所/" data-id="cjxcwb0u6000csffmkrjuy7sa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-buffett" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/buffett/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/buffett/">致社区的一封公开信：沃伦 · 巴菲特慈善午宴</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>各位波场人，</p>
<p>我很高兴地宣布，我赢得了参加亿万富翁沃伦·巴菲特所主持20周年慈善午宴的珍贵机会。</p>
<p>我一直都是巴菲特及其长期价值投资策略的信徒，当然也是他的忠实粉丝。 大家可能听过，这位伯克希尔·哈撒韦（Berkshire Hathaway）公司的首席执行官曾公开表示，他认为世界上最大的加密货币比特币并没有“独特的价值”；但他也指出了区块链作为所有加密货币底层技术所蕴藏的潜力。</p>
<p>在我看来，长期价值投资策略与加密货币是一回事。我们社区成员知道，给主流社会科普区块链的价值与合理用例的道路长且艰，与其追求赚快钱，我们的目标是告诉大家真正的投资是与远见和执行力相关的。</p>
<p>我认为，此次与巴菲特共进午宴，将是一个谋求互相理解和成长的机会。 为了增进对话并支持整个加密货币和区块链社区，我将邀请数位区块链业界领袖一道，前往纽约共赴午宴。</p>
<p>我们的社区非常透明化，也愿意与我们的批评者进行对话，尤其是我非常敬重的人。更不用说我们来自同一所母校：宾夕法尼亚大学！</p>
<p>毕竟，即使是有史以来最成功的投资家之一，有时也会错过即将到来的浪潮。 巴菲特承认，他在食品行业巨头卡夫亨氏公司（Kraft Heinz Co.）上投资过多，同时却没有意识到亚马逊、谷歌母公司Alphabet、甚至是苹果这类公司的潜力。</p>
<p>巴菲特一再表示，他希望投资那些他认为具有长期竞争优势的企业； 而我们区块链行业在这方面有很多可以证明。 我一直都强调，我们不能仅仅为去中心化应用程序、金融和其他领域打造平台，而必须花尽可能多的时间去建立、培育社区，支持区块链概念。</p>
<p>我认为，区块链社区正处于技术和金融蓬勃发展时代的开端。 我也坚信，通过适当的理解和沟通，巴菲特将转变他对加密货币和区块链的总体立场，将这一新的投资策略融入自己的投资组合。</p>
<p>我知道很多人可能会说：巴菲特比我年长60岁，在我出生之前就已经是投资大师了——我又有什么资格去跟他高谈阔论什么大手笔的投资呢？记得巴菲特曾说过，他如今不会单枪匹马地做这类投资；他有一个年轻的高管团队，为他不熟悉的领域出谋献策。</p>
<p>无论男女老少，作为一名创业家，都应该去利用可用范围内所有的有效工具，以获得成功。</p>
<p>就算这样的努力可能会失败，我也想重申，我们的全球社区在致力打造崭新未来的同时，也不忘扬升他人；作为这样的社区的一分子，意义重大。 波场TRON一直与Binance币安慈善基金会紧密合作，支持慈善事业，改善欠发达国家的营养和教育状况。 今年2月，我在一位妹妹罹患渐冻症员工的建议下，捐款支持ALS渐冻人基金会。</p>
<p>巴菲特慈善午宴拍卖同样也是值得追求的崇高事业。 午宴所得善款将百分之百用于支持格莱德基金会（GLIDE Foundation），助力基金会50年来致力于救助旧金山流浪贫困者的事业。 旧金山是BitTorrent的所在地，也是我们举办首届开发者和社区峰会niTROn大会之地。</p>
<p>最后，我想说，此次参与巴菲特慈善午宴，不仅是我个人生涯的亮点，波场TRON和BitTorrent公司重大的一天，更象征着整个区块链社区的胜利。 我迫不及待地想要参加此次午宴，藉此机会向这位投资大师学习取经，也希望他能听取我们的一些见解！</p>
<p>波多场大，纵情向前！</p>
<p>孙宇晨</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/buffett/" data-id="cjxcwb0t00000sffmbfkx8uee" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-tron/One_Page" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/One_Page/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/One_Page/">波场介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="什么是TRON"><a href="#什么是TRON" class="headerlink" title="什么是TRON"></a>什么是TRON</h1><p>波场TRON以推动互联网去中心化为己任，致力于为去中心化互联网搭建基础设施。旗下的TRON协议是全球最大的基于区块链的去中心化应用操作系统协议之一，为协议上的去中心化应用运行提供高吞吐，高扩展，高可靠性的底层公链支持。</p>
<h2 id="TRON的优势"><a href="#TRON的优势" class="headerlink" title="TRON的优势"></a>TRON的优势</h2><ul>
<li>高吞吐</li>
</ul>
<p>在TRON的共识机制下，有限的高计算性能节点被用户选为网络维护节点，从而保证了整体网络的TPS维持在可接受的程度之上，实现了高吞吐的特点。TRON独有的共识机制使得TRON网络的TPS远远超出Bitcoin、Ethereum等。</p>
<p>高TPS间接保证了TRON上所有运算的低延迟，可以使转账速度更快，赶上现有支付方式例如VISA、SWIFT的速度，从而使得日常支付成为可能。</p>
<ul>
<li>易扩展</li>
</ul>
<p>得益于高效的智能合约，以及智能合约的无限可能性，TRON具有极大的可扩展性，丰富多彩的各种应用可以部署于TRON上。</p>
<p>另外优良数据库结构和账户系统的结合，TRON能更加方便的实现复杂的模型、设计，对开发十分友好，且保证了极高TPS的可能性。同时还使得TRON网络能够支持大量用户，对于现在已经成熟运行的各种应用、网站、服务等，能够轻松地转移到TRON网络上，使得已存的模式获得区块链技术领域的提升，从而更加具有与现存机构进行竞争的可能性。</p>
<ul>
<li>高可靠性</li>
</ul>
<p>TRON致力于打造更加去中心化的共识机制。去中心化程度越高，整体的网络结构、用户资产，及内在价值也就更加可靠，更加值得信赖。同时，TRON的共识机制相比POW模式，能够极大地节省能源。</p>
<ul>
<li>低费用</li>
</ul>
<p>TRON网络将会采取极低运算费用的设计，从而使得部署于TRON上的各种应用更加容易扩展用户，更加具有商业操控性。</p>
<ul>
<li>易于使用</li>
</ul>
<p>TRON团队充分调研了用户的需求和期望，专注于打造更易于使用的区块链产品。</p>
<h2 id="核心设计"><a href="#核心设计" class="headerlink" title="核心设计"></a>核心设计</h2><ul>
<li>独有的共识机制</li>
</ul>
<p>TRON采用改良过的POS共识机制。在TRON的共识机制约定下，全球用户自发部署TRON网络节点，并由所有TRON用户投票选择出N个代表节点，选出的各代表节点之间权力平等，共同协作完成TRON网络上的计算任务。由于用户天然为自己的利益考虑，用户会自发的选择更高性能的，同时趋向于去中心化的分布式节点。</p>
<ul>
<li><p>高效的智能合约</p>
<p>  TRON的高效智能合约基于以下几点得以实现：</p>
<ul>
<li>TRON支持JAVA开发，具有成熟的开发者社区，开发效率高，支持场景众多。</li>
<li>共识机制的高效。</li>
<li>TRON具有良好的数据库结构以及账户系统，可以更好地帮助用户将复杂的想法、模型转化为应用实体。</li>
</ul>
</li>
</ul>
<h2 id="愿景、未来"><a href="#愿景、未来" class="headerlink" title="愿景、未来"></a>愿景、未来</h2><p>因为TRON的诸多优点，我们旨在以TRON为地基，打造一个人人均可参与，人人均会收益的生态圈平台，我们称之为TRON生态。</p>
<ul>
<li>用户使用TRON网络及其上面部署的各种DApp的功能，能够减少各种成本，提高生活便利性，获得财富回报。</li>
<li>开发者可以在TRON网络上部署DApp，扩展业务范围，宣传自己的理念、价值观。</li>
<li>网络维护节点为TRON网络的运转提供支持，并从中获得报酬。</li>
</ul>
<p>不管是用户，开发者，还是TRON网络的维护节点，所有人都将共同参与TRON平台生态圈的建设，为TRON生态的繁荣做出贡献并从中收获回报。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/One_Page/" data-id="cjxcwb0tr0003sffm8hf2w11p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场介绍/">波场介绍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/交易操作类型说明" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/交易操作类型说明/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/交易操作类型说明/">交易操作类型说明</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="交易的合约类型"><a href="#交易的合约类型" class="headerlink" title="交易的合约类型"></a>交易的合约类型</h2><p>合约支持多种类型，是TRON网络中的基本单位。下面详细介绍每种合约及参数。\<br><a href="#1">1.创建账户 AccountCreateContract</a> \<br><a href="#2">2.转账 TransferContract</a>\<br><a href="#3">3.转账发布的Token TransferAssetContract</a>\<br><a href="#4">4.投票超级节点  VoteWitnessContract</a>\<br><a href="#5">5.创建超级节点候选人 WitnessCreateContract</a>\<br><a href="#6">6.发布Token AssetIssueContract</a>\<br><a href="#7">7.更新超级节点候选人URL WitnessUpdateContract</a>\<br><a href="#8">8.购买发行的Token ParticipateAssetIssueContract</a>\<br><a href="#9">9.更新账户 AccountUpdateContract</a>\<br><a href="#10">10.冻结资产 FreezeBalanceContract</a>\<br><a href="#11">11.解冻资产 UnfreezeBalanceContract</a>\<br><a href="#12">12.提取奖励 WithdrawBalanceContract</a>\<br><a href="#13">13.解冻发布的Token UnfreezeAssetContract</a>\<br><a href="#14">14.更新通证参数 UpdateAssetContract</a>\<br><a href="#15">15.创建提议  ProposalCreateContract</a>\<br><a href="#16">16.赞成提议 ProposalApproveContract</a>\<br><a href="#17">17.删除提议 ProposalDeleteContract</a>\<br><a href="#18">18.设置账户ID SetAccountIdContract</a>\<br><a href="#19">19.创建智能合约 CreateSmartContract</a>\<br><a href="#20">20.触发智能合约 TriggerSmartContract</a>\<br><a href="#21">21.更新合约 UpdateSettingContract</a>\<br><a href="#22">22.创建交易所 ExchangeCreateContract</a>\<br><a href="#23">23.给交易所注资 ExchangeInjectContract</a>\<br><a href="#24">24.从交易所撤资 ExchangeWithdrawContract</a>\<br><a href="#25">25.在交易所交易 ExchangeTransactionContract</a>\</p>
<h2 id="1-创建账户-AccountCreateContract"><a href="#1-创建账户-AccountCreateContract" class="headerlink" title="1.创建账户 AccountCreateContract"></a><h2 id="1">1.创建账户 AccountCreateContract</h2></h2><p>   <code>AccountCreatContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>account_address</code>： 将要创建的账户地址。<br>   <code>type</code>：账户类型——比如：_0_ 代表的账户类型是<code>Normal</code>。</p>
<pre><code>message AccountCreateContract {
  bytes owner_address = 1;
  bytes account_address = 2;
  AccountType type = 3;
}
</code></pre><h2 id="2-转账-TransferContract"><a href="#2-转账-TransferContract" class="headerlink" title="2.转账 TransferContract"></a><h2 id="2">2.转账 TransferContract</h2></h2><p>   <code>TransferContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>to_address</code>： 目标账户地址。<br>   <code>amount</code>：转账金额，单位为 sun。</p>
<pre><code>message TransferContract {
  bytes owner_address = 1;
  bytes to_address = 2;
  int64 amount = 3;
}
</code></pre><h2 id="3-转账发布的Token-TransferAssetContract"><a href="#3-转账发布的Token-TransferAssetContract" class="headerlink" title="3.转账发布的Token TransferAssetContract"></a><h2 id="3">3.转账发布的Token TransferAssetContract</h2></h2><p>   <code>TransferAssetContract</code>包含4种参数：<br>   <code>asset_name</code>：发布Token的名称。<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>to_address</code>： 目标账户地址。<br>   <code>amount</code>：转账Token的数量。</p>
<pre><code>message TransferAssetContract {
  bytes asset_name = 1;
  bytes owner_address = 2;
  bytes to_address = 3;
  int64 amount = 4;
}
</code></pre><h2 id="4-投票超级节点-VoteWitnessContract"><a href="#4-投票超级节点-VoteWitnessContract" class="headerlink" title="4.投票超级节点  VoteWitnessContract"></a><h2 id="4">4.投票超级节点  VoteWitnessContract</h2></h2><p>   <code>VoteWitnessContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>vote_address</code>： 超级节点候选人的地址。<br>   <code>vote_count</code>：投给超级节点候选人的票数。<br>   <code>votes</code>：超级节点候选人列表。<br>   <code>support</code>：是否支持，这里应该是恒为true,暂未使用该参数。  </p>
<pre><code>message VoteWitnessContract {
  message Vote {
    bytes vote_address = 1;
    int64 vote_count = 2;
  }
  bytes owner_address = 1;
  repeated Vote votes = 2;
  bool support = 3;
}
</code></pre><h2 id="5-创建超级节点候选人-WitnessCreateContract"><a href="#5-创建超级节点候选人-WitnessCreateContract" class="headerlink" title="5.创建超级节点候选人 WitnessCreateContract"></a><h2 id="5">5.创建超级节点候选人 WitnessCreateContract</h2></h2><p>   <code>WitnessCreateContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>url</code>： 超级节点后续人网址。    </p>
<pre><code>message WitnessCreateContract {
  bytes owner_address = 1;
  bytes url = 2;
}
</code></pre><h2 id="6-发布Token-AssetIssueContract"><a href="#6-发布Token-AssetIssueContract" class="headerlink" title="6.发布Token AssetIssueContract"></a><h2 id="6">6.发布Token AssetIssueContract</h2></h2><p>   <code>AssetIssueContract</code>包含17种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>name</code>：发布Token的名称——比如：<em>“SiCongcontract”</em>。<br>   <code>abbr</code>： 。<br>   <code>total_supply</code>：发行总的token数量——比如：<em>100000000</em>。<br>   <code>frozen_supply</code>：冻结Token的数量和冻结时间列表。<br>   <code>trx_num</code>：对应TRX数量——比如：<em>232241</em>。<br>   <code>num</code>： 对应的自定义资产数目。<br>   <code>start_time</code>：开始时间——比如：<em>20170312</em>。<br>   <code>end_time</code>：结束时间——比如：<em>20170512</em>。<br>   <code>order</code>：相同asset_name时，order递增，默认初始值为0。<br>   <code>vote_score</code>：合约的评分——比如：<em>12343</em>。<br>   <code>description</code>：Token的描述——比如：<em>”trondada”</em>。<br>   <code>url</code>：Token的url地址链接。<br>   <code>free_asset_net_limit</code>：每个账户可以使用的免费带宽（转移该资产时使用）。<br>   <code>public_free_asset_net_limit</code>：所有账户可以使用的免费带宽（转移该资产时使用）。<br>   <code>public_free_asset_net_usage</code>：所有账户使用免费带宽（转移该资产时使用）。<br>   <code>public_latest_free_net_time</code>：最近一次转移该Token使用免费带宽的时间。  </p>
<pre><code>message AssetIssueContract {
  message FrozenSupply {
    int64 frozen_amount = 1;
    int64 frozen_days = 2;
  }
  bytes owner_address = 1;
  bytes name = 2;
  bytes abbr = 3;
  int64 total_supply = 4;
  repeated FrozenSupply frozen_supply = 5;
  int32 trx_num = 6;
  int32 num = 8;
  int64 start_time = 9;
  int64 end_time = 10;
  int64 order = 11; // the order of tokens of the same name
  int32 vote_score = 16;
  bytes description = 20;
  bytes url = 21;
  int64 free_asset_net_limit = 22;
  int64 public_free_asset_net_limit = 23;
  int64 public_free_asset_net_usage = 24;
  int64 public_latest_free_net_time = 25;
}
</code></pre><h2 id="7-更新超级节点候选人URL-WitnessUpdateContract"><a href="#7-更新超级节点候选人URL-WitnessUpdateContract" class="headerlink" title="7.更新超级节点候选人URL WitnessUpdateContract"></a><h2 id="7">7.更新超级节点候选人URL WitnessUpdateContract</h2></h2><p>   <code>WitnessUpdateContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>update_url</code>： 超级节点更新后的url。  </p>
<pre><code>message WitnessUpdateContract {
  bytes owner_address = 1;
  bytes update_url = 12;
}
</code></pre><h2 id="8-购买发行的Token-ParticipateAssetIssueContract"><a href="#8-购买发行的Token-ParticipateAssetIssueContract" class="headerlink" title="8.购买发行的Token ParticipateAssetIssueContract"></a><h2 id="8">8.购买发行的Token ParticipateAssetIssueContract</h2></h2><p>   <code>ParticipateAssetIssueContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>to_address</code>：发行Token所有者地址。<br>   <code>account_name</code>： 发行Token的名称，包括Token名称和order<br>   <code>amount</code>：购买发行Token使用TRX的数量，单位是 sun。  </p>
<pre><code>message ParticipateAssetIssueContract {
  bytes owner_address = 1;
  bytes to_address = 2;
  bytes asset_name = 3;
  int64 amount = 4;
}
</code></pre><h2 id="9-更新账户-AccountUpdateContract"><a href="#9-更新账户-AccountUpdateContract" class="headerlink" title="9.更新账户 AccountUpdateContract"></a><h2 id="9">9.更新账户 AccountUpdateContract</h2></h2><p>   <code>AccountUpdateContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>account_name</code>： 账户名称——比如： <em>“SiCongsaccount”</em>。   </p>
<pre><code>// Update account name. Account name is not unique now.
message AccountUpdateContract {
  bytes account_name = 1;
  bytes owner_address = 2;
}
</code></pre><h2 id="10-冻结资产-FreezeBalanceContract"><a href="#10-冻结资产-FreezeBalanceContract" class="headerlink" title="10.冻结资产 FreezeBalanceContract"></a><h2 id="10">10.冻结资产 FreezeBalanceContract</h2></h2><p>   <code>FreezeBalanceContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>frozen_balance</code>：冻结资产的数量。<br>   <code>frozen_duration</code>：冻结资产的时间段。<br>   <code>resource</code>： 冻结TRX获取资源的类型。<br>   <code>receiver_address</code> ：接收资源的账户。    </p>
<pre><code>message FreezeBalanceContract {
  bytes owner_address = 1;
  int64 frozen_balance = 2;
  int64 frozen_duration = 3;
  ResourceCode resource = 10;
  bytes receiver_address = 15;
}
</code></pre><h2 id="11-解冻资产-UnfreezeBalanceContract"><a href="#11-解冻资产-UnfreezeBalanceContract" class="headerlink" title="11.解冻资产 UnfreezeBalanceContract"></a><h2 id="11">11.解冻资产 UnfreezeBalanceContract</h2></h2><p>   <code>UnfreezeBalanceContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>resource</code>： 解冻资源的类型。<br>   <code>receiver_address</code> ：接收资源的账户。</p>
<pre><code>message UnfreezeBalanceContract {
  bytes owner_address = 1;
  ResourceCode resource = 10;
  bytes receiver_address = 13;
}
</code></pre><h2 id="12-提取奖励-WithdrawBalanceContract"><a href="#12-提取奖励-WithdrawBalanceContract" class="headerlink" title="12.提取奖励 WithdrawBalanceContract"></a><h2 id="12">12.提取奖励 WithdrawBalanceContract</h2></h2><p>   <code>WithdrawBalanceContract</code>包含1种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。  </p>
<pre><code>message WithdrawBalanceContract {
  bytes owner_address = 1;
}
</code></pre><h2 id="13-解冻发布的Token-UnfreezeAssetContract"><a href="#13-解冻发布的Token-UnfreezeAssetContract" class="headerlink" title="13.解冻发布的Token UnfreezeAssetContract"></a><h2 id="13">13.解冻发布的Token UnfreezeAssetContract</h2></h2><p>   <code>UnfreezeAssetContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。  </p>
<pre><code>message UnfreezeAssetContract {
  bytes owner_address = 1;
}
</code></pre><h2 id="14-更新通证参数-UpdateAssetContract"><a href="#14-更新通证参数-UpdateAssetContract" class="headerlink" title="14.更新通证参数 UpdateAssetContract"></a><h2 id="14">14.更新通证参数 UpdateAssetContract</h2></h2><p>   <code>UpdateAssetContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>description</code>： 通证的描述。<br>   <code>url</code>：通证的Url。<br>   <code>new_limit</code>：每个调用者可以消耗Bandwidth point的限制。<br>   <code>new_public_limit</code>： 所有调用者可以消耗Bandwidth points的限制。  </p>
<pre><code>message UpdateAssetContract {
  bytes owner_address = 1;
  bytes description = 2;
  bytes url = 3;
  int64 new_limit = 4;
  int64 new_public_limit = 5;
}
</code></pre><h2 id="15-创建提议-ProposalCreateContract"><a href="#15-创建提议-ProposalCreateContract" class="headerlink" title="15.创建提议  ProposalCreateContract"></a><h2 id="15">15.创建提议  ProposalCreateContract</h2></h2><p>   <code>ProposalCreateContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>parameters</code>： 提议。  </p>
<pre><code>message ProposalCreateContract {
  bytes owner_address = 1;
  map&lt;int64, int64&gt; parameters = 2;
}
</code></pre><h2 id="16-赞成提议-ProposalApproveContract"><a href="#16-赞成提议-ProposalApproveContract" class="headerlink" title="16.赞成提议 ProposalApproveContract"></a><h2 id="16">16.赞成提议 ProposalApproveContract</h2></h2><p>   <code>ProposalApproveContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>proposal_id</code>： 提议的Id。<br>   <code>is_add_approval</code>：是否赞成提议。  </p>
<pre><code>message ProposalApproveContract {
  bytes owner_address = 1;
  int64 proposal_id = 2;
  bool is_add_approval = 3; // add or remove approval
}
</code></pre><h2 id="17-删除提议-ProposalDeleteContract"><a href="#17-删除提议-ProposalDeleteContract" class="headerlink" title="17.删除提议 ProposalDeleteContract"></a><h2 id="17">17.删除提议 ProposalDeleteContract</h2></h2><p>   <code>ProposalDeleteContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>proposal_id</code>： 提议ID。  </p>
<pre><code>message ProposalDeleteContract {
  bytes owner_address = 1;
  int64 proposal_id = 2;
}
</code></pre><h2 id="18-设置账户ID-SetAccountIdContract"><a href="#18-设置账户ID-SetAccountIdContract" class="headerlink" title="18.设置账户ID SetAccountIdContract"></a><h2 id="18">18.设置账户ID SetAccountIdContract</h2></h2><p>   <code>SetAccountIdContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>account_id</code>： 账户Id。  </p>
<pre><code>// Set account id if the account has no id. Account id is unique and case insensitive.
message SetAccountIdContract {
  bytes account_id = 1;
  bytes owner_address = 2;
}
</code></pre><h2 id="19-创建智能合约-CreateSmartContract"><a href="#19-创建智能合约-CreateSmartContract" class="headerlink" title="19.创建智能合约 CreateSmartContract"></a><h2 id="19">19.创建智能合约 CreateSmartContract</h2></h2><p>   <code>CreateSmartContract</code>包含2种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>new_contract</code>： 智能合约。  </p>
<pre><code>message CreateSmartContract {
  bytes owner_address = 1;
  SmartContract new_contract = 2;
}
</code></pre><h2 id="20-触发智能合约-TriggerSmartContract"><a href="#20-触发智能合约-TriggerSmartContract" class="headerlink" title="20.触发智能合约 TriggerSmartContract"></a><h2 id="20">20.触发智能合约 TriggerSmartContract</h2></h2><p>   <code>TriggerSmartContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>contract_address</code>： 合约地址。<br>   <code>call_value</code>：TRX的值。<br>   <code>data</code>：操作参数。   </p>
<pre><code>message TriggerSmartContract {
  bytes owner_address = 1;
  bytes contract_address = 2;
  int64 call_value = 3;
  bytes data = 4;
}
</code></pre><h2 id="21-更新合约-UpdateSettingContract"><a href="#21-更新合约-UpdateSettingContract" class="headerlink" title="21.更新合约 UpdateSettingContract"></a><h2 id="21">21.更新合约 UpdateSettingContract</h2></h2><p>   <code>UpdateSettingContract</code>包含3种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>contract_address</code>： 合约地址。<br>   <code>consume_user_resource_percent</code>：将要更新的账户消耗资源的百分比。  </p>
<pre><code>message UpdateSettingContract {
  bytes owner_address = 1;
  bytes contract_address = 2;
  int64 consume_user_resource_percent = 3;
}
</code></pre><h2 id="22-创建交易所-ExchangeCreateContract"><a href="#22-创建交易所-ExchangeCreateContract" class="headerlink" title="22.创建交易所 ExchangeCreateContract"></a><h2 id="22">22.创建交易所 ExchangeCreateContract</h2></h2><p>   <code>ExchangeCreateContract</code>包含5种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>first_token_id</code>： 第1种token的id 。<br>   <code>first_token_balance</code>：第1种token的balance。<br>   <code>second_token_id</code>：第2种token的id。<br>   <code>second_token_balance</code>：第2种token的balance。  </p>
<pre><code>message ExchangeCreateContract {
  bytes owner_address = 1;
  bytes first_token_id = 2;
  int64 first_token_balance = 3;
  bytes second_token_id = 4;
  int64 second_token_balance = 5;
}
</code></pre><h2 id="23-给交易所注资-ExchangeInjectContract"><a href="#23-给交易所注资-ExchangeInjectContract" class="headerlink" title="23.给交易所注资 ExchangeInjectContract"></a><h2 id="23">23.给交易所注资 ExchangeInjectContract</h2></h2><p>   <code>ExchangeInjectContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>exchange_id</code>： 交易对的id。<br>   <code>token_id</code>：要注资的token的id。<br>   <code>quant</code>：要注资的token的金额。   </p>
<pre><code>message ExchangeInjectContract {
  bytes owner_address = 1;
  int64 exchange_id = 2;
  bytes token_id = 3;
  int64 quant = 4;
}
</code></pre><h2 id="24-从交易所撤资-ExchangeWithdrawContract"><a href="#24-从交易所撤资-ExchangeWithdrawContract" class="headerlink" title="24.从交易所撤资 ExchangeWithdrawContract"></a><h2 id="24">24.从交易所撤资 ExchangeWithdrawContract</h2></h2><p>   <code>ExchangeWithdrawContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>exchange_id</code>： 交易对的id。<br>   <code>token_id</code>：要撤资的token的id。<br>   <code>quant</code>：要撤资的token的金额。   </p>
<pre><code>message ExchangeWithdrawContract {
  bytes owner_address = 1;
  int64 exchange_id = 2;
  bytes token_id = 3;
  int64 quant = 4;
}
</code></pre><h2 id="25-在交易所交易-ExchangeTransactionContract"><a href="#25-在交易所交易-ExchangeTransactionContract" class="headerlink" title="25.在交易所交易 ExchangeTransactionContract"></a><h2 id="25">25.在交易所交易 ExchangeTransactionContract</h2></h2><p>   <code>ExchangeTransactionContract</code>包含4种参数：<br>   <code>owner_address</code>：合约持有人地址——比如： <em>“0xu82h…7237”</em>。<br>   <code>exchange_id</code>： 交易对的id。<br>   <code>token_id</code>：要卖出的token的id。<br>   <code>quant</code>：要卖出的token的金额。   </p>
<pre><code>message ExchangeTransactionContract {
  bytes owner_address = 1;
  int64 exchange_id = 2;
  bytes token_id = 3;
  int64 quant = 4;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/交易操作类型说明/" data-id="cjxcwb0ts0004sffmtm3l5fnh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/创建账户" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/创建账户/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/创建账户/">创建账户</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="创建账户"><a href="#创建账户" class="headerlink" title="创建账户"></a>创建账户</h1><p>您可以随意注册离线密钥对（包含地址和私钥），但是这个密钥对不会被TRON网络记录。<br>要想使这个密钥对成为TRON网络中的账户，需要其他已经存在于TRON网络的账户调用以下3种api之一：</p>
<ul>
<li>直接调用创建账户api</li>
<li>给新地址转TRX</li>
<li>给新地址转任意一种token</li>
</ul>
<p>交易被网络确认后，您就可以在TRON网络中查询到地址对应的账户的信息了。创建账户会消耗冻结获取的带宽，带宽不足则烧掉创建者的固定金额的TRX，目前为0.1TRX。</p>
<p><strong>【注意】</strong>  Odyssey3.0上线后，经委员会通过后，创建账户烧掉创建者的固定金额的TRX，默认是0.1TRX，不消耗带宽。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/创建账户/" data-id="cjxcwb0tw0006sffm2ew0hu7s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/冻结与投票" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/冻结与投票/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/冻结与投票/">冻结与投票</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="冻结-解冻资金"><a href="#冻结-解冻资金" class="headerlink" title="冻结/解冻资金"></a>冻结/解冻资金</h1><p><a href="#1">1.为什么要冻结资金</a> \<br><a href="#2">2.冻结/解冻机制</a> \<br><a href="#3">3.投票</a> \<br><a href="#4">4.资源委派</a></p>
<h2 id="1-为什么要冻结资金"><a href="#1-为什么要冻结资金" class="headerlink" title="1.为什么要冻结资金"></a><h2 id="1">1.为什么要冻结资金</h2></h2><p>设置冻结资金的机制有2个出发点：</p>
<ul>
<li>防止恶意的垃圾交易阻塞网络，造成交易确认缓慢的问题</li>
<li>防止恶意投票</li>
</ul>
<h2 id="2-冻结-解冻机制"><a href="#2-冻结-解冻机制" class="headerlink" title="2.冻结/解冻机制"></a><h2 id="2">2.冻结/解冻机制</h2></h2><p>冻结资金后，你将获得对应数量的TRON Power(TP)、Bandwidth Points和CPU资源。<br><strong>注意</strong> 冻结时需要指定获取Bandwidth或CPU其中的一种，默认为Bandwidth<br>TRON Power(TP)可以用来投票，bandwidth points和CPU用于交易。TRON Power(TP)及bandwidth points、CPU的使用及计算规则在后文中介绍。</p>
<p>冻结的资金会进入你的冻结账户，无法用于交易。</p>
<p>当临时需要更多的TRON Power(TP)或bandwidth时，可以追加冻结资金，从而获取追加部分的TRON Power(TP)与bandwidth。此时解冻时间推迟到最后一次冻结操作的3天后。</p>
<ul>
<li>冻结与解冻命令如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">freezebalance amount time resource</span><br><span class="line">amount:冻结资金，单位是sun。amount最小为 1,000,000 sun, 即1TRX</span><br><span class="line">time：冻结时间，冻结资金到解冻资金的时间为3天</span><br><span class="line">resource：冻结获取的资源，0为Bandwidth Point，1为Energy。默认为0</span><br><span class="line"></span><br><span class="line">unfreezebalance resource</span><br><span class="line">resource：解冻失去的资源，0为Bandwidth Point，1为Energy。默认为0</span><br></pre></td></tr></table></figure>
<ul>
<li><p>示例：</p>
<p>  <code>freezebalance 10_000_000 3 0</code></p>
</li>
<li><p>解冻命令如下：</p>
<p>  <code>unfreezebalance 0</code></p>
</li>
</ul>
<h2 id="3-投票"><a href="#3-投票" class="headerlink" title="3.投票"></a><h2 id="3">3.投票</h2></h2><p>TRON网络中的每一个账户都具有选举权，可以通过投票选出自己认同的超级代表。 投票需要TRON Power(TP)，你的TRON Power(TP)的多少由当前冻结资金决定。</p>
<p>TRON Power(TP)的计算方法：每冻结1TRX，就可以获得1单位TRON Power(TP)。</p>
<p>在解冻后，你没有了冻结的资产，相应地失去了所有的TRON Power(TP)，因此以前的投票会失效。你可以通过重新冻结并投票来避免投票失效。</p>
<p>注意: 波场网络只记录你最后一次投票的状态，也就是说你的每一次投票都会覆盖以前所有的投票效果</p>
<ul>
<li>示例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">freezebalance 10,000,000 3 // 冻结了10TRX，获取了10单位TRON Power(TP)</span><br><span class="line">votewitness witness1 4 witness2 6 // 同时给witness1投了4票，给witness2投了6票</span><br><span class="line">votewitness witness1 3 witness2 7 // 同时给witness1投了3票，给witness2投了7票</span><br></pre></td></tr></table></figure>
<p>以上命令的最终结果是给witness1投了3票，给witness2投了7票</p>
<h2 id="4-资源委派"><a href="#4-资源委派" class="headerlink" title="4.资源委派"></a><h2 id="4">4.资源委派</h2></h2><p>冻结资金后，可以将获得Bandwidth Points和CPU资源给其他账户使用，TRON Power(TP)依然属于原账户。 </p>
<p>该命令与第一节中命令类似，仅增加receiverAddress字段。</p>
<ul>
<li>冻结与解冻命令如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">freezebalance amount time resource receiverAddress</span><br><span class="line">amount:冻结资金，单位是sun。amount最小为 1,000,000 sun, 即1TRX</span><br><span class="line">time：冻结时间，冻结资金到解冻资金的时间为3天</span><br><span class="line">resource：冻结获取的资源，0为Bandwidth Point，1为Energy。默认为0</span><br><span class="line">receiverAddress：接收资源的账户</span><br><span class="line"></span><br><span class="line">unfreezebalance resource receiverAddress</span><br><span class="line">resource：解冻失去的资源，0为Bandwidth Point，1为Energy。默认为0</span><br><span class="line">receiverAddress：接收资源的账户</span><br></pre></td></tr></table></figure>
<ul>
<li><p>示例：</p>
<p>  <code>freezebalance 10_000_000 3 0 address</code></p>
</li>
<li><p>解冻命令如下：</p>
<p>  <code>unfreezebalance 0 address</code></p>
</li>
<li><p>账户资源字段</p>
</li>
</ul>
<pre><code> ```
 Account  { 
  int64 acquired_delegated_frozen_balance_for_bandwidth = 41; 
  int64 delegated_frozen_balance_for_bandwidth = 42;
  message AccountResource { 
    int64 acquired_delegated_frozen_balance_for_energy = 4; 
    int64 delegated_frozen_balance_for_energy = 5;
    } 
  }
```  
</code></pre><p><code>acquired_delegated_frozen_balance_for_bandwidth</code>  :其他账户委派给该账户的Bandwidth资源  \<br><code>delegated_frozen_balance_for_bandwidth</code>  :  该账户委派给其他账户的Bandwidth资源\<br><code>acquired_delegated_frozen_balance_for_energy</code>:其他账户委派给该账户的CPU资源\<br><code>delegated_frozen_balance_for_energy</code>:该账户委派给其他账户的CPU资源</p>
<ul>
<li>查询账户资源委派信息</li>
</ul>
<p><strong>场景1：查询账户给哪些账户委派了资源</strong></p>
<p>step0：获得要查询的账户的地址。\<br>step1：通过<code>GetDelegatedResourceAccountIndex</code>接口，查询获得所有与该账户发生资源委派的其他地址。</p>
<pre><code>rpc GetDelegatedResourceAccountIndex (BytesMessage) returns (DelegatedResourceAccountIndex) {};

message DelegatedResourceAccountIndex {
  bytes account = 1;
  repeated bytes fromAccounts = 2;
  repeated bytes toAccounts = 3;
}
</code></pre><p><code>BytesMessage</code>：查询的地址 \<br><code>account</code>：查询的地址 \<br><code>fromAccounts</code>：从哪些账户中获得了资源 \<br><code>toAccounts</code>：给哪些账户中委派了资源</p>
<p><strong>场景2：查询账户给某个账户委派了多少资源</strong>      </p>
<p>step0：两个查询的地址，address1、address2。\<br>step1：通过<code>GetDelegatedResource</code>接口，查询获得address1给address2委派的资源。</p>
<pre><code>rpc GetDelegatedResource (DelegatedResourceMessage) returns (DelegatedResourceList) {
  };

message DelegatedResourceMessage {
  bytes fromAddress = 1;
  bytes toAddress = 2;
}

message DelegatedResourceList {
  repeated DelegatedResource delegatedResource = 1;
}

message DelegatedResource {
  bytes from = 1;
  bytes to = 2;
  int64 frozen_balance_for_bandwidth = 3;
  int64 frozen_balance_for_energy = 4;
  int64 expire_time_for_bandwidth = 5;
  int64 expire_time_for_energy = 6;
}
</code></pre><p><code>DelegatedResourceList</code>:只包含一个元素 \<br><code>from</code>:发起资源委派的地址\<br><code>to</code>:接受资源委派的地址\<br><code>frozen_balance_for_bandwidth</code>:委派的带宽\<br><code>frozen_balance_for_energy</code>:委派的energy\<br><code>expire_time_for_bandwidth</code>:委派的带宽解冻时间\<br><code>expire_time_for_energy</code>:委派的energy解冻时间</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/冻结与投票/" data-id="cjxcwb0tx0007sffmvediql7r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/多重签名" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/多重签名/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/多重签名/">多重签名</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="多重签名"><a href="#多重签名" class="headerlink" title="多重签名"></a>多重签名</h1><p><a href="#1">1.背景</a> \<br><a href="#2">2.概念说明</a> \<br><a href="#2.1">2.1 结构说明</a> \<br><a href="#2.2">2.2 Owner权限</a>\<br><a href="#2.3">2.3 Witness权限</a>\<br><a href="#2.4">2.4 Active权限</a>\<br><a href="#2.4">2.5 费用</a>\<br><a href="#3">3.API</a> \<br><a href="#3.1">3.1 修改权限</a>\<br><a href="#3.2">3.2 执行合约</a>\<br><a href="#4">4.其他</a> </p>
<h2 id="1-背景"><a href="#1-背景" class="headerlink" title="1.背景"></a><h2 id="1">1.背景</h2></h2><p><strong>注意：V3.5版本后支持</strong></p>
<p>目前TRON的所有交易签名，都是用的同一个私钥完成。没有权限分级，也不能实现多人共同控制账户。因此，设计并实现多重签名功能，每个权限可以对应多个私钥。</p>
<p> <a href="https://github.com/tronprotocol/TIPs/issues/16" target="_blank" rel="noopener">https://github.com/tronprotocol/TIPs/issues/16</a></p>
<h2 id="2-概念说明"><a href="#2-概念说明" class="headerlink" title="2.概念说明"></a><h2 id="2">2.概念说明</h2></h2><p>该方案共包含三种权限级别，owner、witness以及active权限，其中owner权限具有执行所有合约的权限，witness权限用于超级代表出块，active是自定义权限(可以组合权限集合)，以下将详细说明。</p>
<h3 id="2-1-结构说明"><a href="#2-1-结构说明" class="headerlink" title="2.1 结构说明"></a><h2 id="2.1">2.1 结构说明</h2></h3><p><strong>1. Account修改</strong></p>
<pre><code>message Account { 
  ... 
  Permission owner_permission = 31;
  Permission witness_permission = 32;
  repeated Permission active_permission = 33;
}
</code></pre><p>在账户结构中新增三个权限属性，分别是 owner_permission、witness_permission 和 active_permission，其中 active_permission 是个列表，可以指定最多8个。</p>
<p><strong>2. ContractType修改</strong></p>
<pre><code>message Transaction {
  message Contract {
    enum ContractType { 
      AccountCreateContract = 0; 
      ... 
      AccountPermissionUpdateContract = 46; 
      }
    }  
  }
}
</code></pre><p>新增一种交易类型 AccountPermissionUpdateContract，用于更新账户权限。</p>
<p><strong>3. AccountPermissionUpdateContract</strong>    </p>
<pre><code>message AccountPermissionUpdateContract {
  bytes owner_address = 1;
  Permission owner = 2;   
  Permission witness = 3; 
  repeated Permission actives = 4; 
}
</code></pre><p><code>AccountPermissionUpdateContract</code>\<br><code>owner_address</code>：待修改权限的账户的地址\<br><code>owner</code>：修改后的 owner 权限\<br><code>witness</code>：修改后的 witness 权限（如果是 witness ）\<br><code>actives</code>：修改后的 actives 权限</p>
<p>该接口是覆盖原账户权限，因此，如果只想修改owner权限，witness（如果是witnss账户）及actives的也需要设置。</p>
<p><strong>4. Permission</strong></p>
<pre><code>message Permission {
  enum PermissionType {
    Owner = 0;
    Witness = 1;
    Active = 2;
  }
  PermissionType type = 1; 
  int32 id = 2;     
  string permission_name = 3;
  int64 threshold = 4;
  int32 parent_id = 5; 
  bytes operations = 6;  
  repeated Key keys = 7;// 
}
</code></pre><p><code>PermissionType</code>: 权限类型，目前仅支持三种权限\<br><code>id</code>: 值由系统自动设置，Owner id=0, Witness id=1, Active id 从2开始递增分配。在执行合约时，<br>通过该id来指定使用哪个权限，如使用owner权限，即将id设置为0。\<br><code>permission_name</code>: 权限名称，由用户设定，长度限制为32字节\<br><code>threshold</code>: 阈值，只有当参与签名的权重之和超过域值才允许做相应的操作。要求小于Long类型的最大值\<br><code>parent_id</code>：目前只能为0 \<br><code>operations</code>：共32字节（256位），每位代表一个合约的权限，为1时表示拥有该合约的权限。<br>如<code>operations=0x0100...00(十六进制),即100...0(二进制)</code>时,查看proto中Transaction.ContractType定义，合约AccountCreateContract的id为0，<br>即表示该permission只拥有执行AccountCreateContract的权限，可以使用”active权限中operations的计算示例”计算获得。\<br><code>keys</code>：共同拥有该权限的地址及权重，最多允许5个key。</p>
<p><strong>5. Key</strong>     </p>
<pre><code>message Key {
  bytes address = 1;
  int64 weight = 2;
}
</code></pre><p><code>address</code>：拥有该权限的地址<br><code>weight</code>：该地址对该权限拥有权重   </p>
<p><strong>6. Transaction修改</strong></p>
<pre><code>message Transaction {
     ...
    int32 Permission_id = 5;
}
</code></pre><p>在交易中增加 <code>Permission_id</code>字段，与<code>Permission.id</code>相对应，用于指定使用哪个权限。默认为0，即owner权限。<br>不允许为1，因为witness权限仅用于出块，不用于对交易进行签名。</p>
<h3 id="2-2-Owner权限"><a href="#2-2-Owner权限" class="headerlink" title="2.2 Owner权限"></a><h2 id="2.2">2.2 Owner权限</h2></h3><p>OwnerPermission是账户的最高权限，用于控制用户的所有权、调整权限结构，Owner权限也可以执行所有合约。</p>
<p>Owner权限具有以下特性：\<br>1、拥有OwnerPermission的地址可以修改OwnerPermission。\<br>2、当OwnerPermission为空时，默认采用该账户的地址具有owner权限。\<br>3、账户新建时，自动将该账户的地址填充到OwnerPermission中，并默认域值为1，keys中仅包含该账户地址且权重为1。\<br>4、当执行合约时未指定permissionId时， 默认采用OwnerPermission。</p>
<h3 id="2-3-Witness权限"><a href="#2-3-Witness权限" class="headerlink" title="2.3 Witness权限"></a><h2 id="2.3">2.3 Witness权限</h2></h3><p>超级代表可使用该权限，管理出块节点。非witness账户无该权限。</p>
<p>使用场景示例：一个超级代表在云服务器上部署出块程序，为了账户安全，此时可以将出块权限赋予另一个地址。由于该地址仅具有出块权限，无TRX转出权限，即使该服务器上私钥被泄密，也不会出现TRX丢失。</p>
<p>Witness出块节点的配置：\<br>1、未修改witness权限时，无需特殊配置。\<br>2、修改witness权限后的出块节点，需要在重新配置，配置项如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#config.conf</span><br><span class="line"></span><br><span class="line">// Optional.The default is empty.</span><br><span class="line">// It is used when the witness account has set the witnessPermission.</span><br><span class="line">// When it is not empty, the localWitnessAccountAddress represents the address of the witness account,</span><br><span class="line">// and the localwitness is configured with the private key of the witnessPermissionAddress in the witness account.</span><br><span class="line">// When it is empty,the localwitness is configured with the private key of the witness account.</span><br><span class="line">//可选项，默认为空。</span><br><span class="line">//用于当witness账户设置了witnessPermission。</span><br><span class="line">//当该值不为空时，localWitnessAccountAddress代表witness账户的地址，localwitness是witnessPermission中的地址的私钥。</span><br><span class="line">//当该值为空时，localwitness配置为witness账户的私钥。</span><br><span class="line"></span><br><span class="line">//localWitnessAccountAddress =</span><br><span class="line"></span><br><span class="line">localwitness = [</span><br><span class="line">  f4df789d3210ac881cb900464dd30409453044d2777060a0c391cbdf4c6a4f57</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="2-4-Active权限"><a href="#2-4-Active权限" class="headerlink" title="2.4 Active权限"></a><h2 id="2.4">2.4 Active权限</h2></h3><p>Active权限，用于提供一个权限的组合，比如提供一个只能执行创建账户、转账功能的权限。 </p>
<p>Active权限有以下特性：\<br>1、拥有OwnerPermission的地址可以修改Active权限\<br>2、拥有执行AccountPermissionUpdateContract权限的地址也能够修改Active权限\<br>3、最多支持8个组合。\<br>4、permission的id从2开始自动递增。\<br>5、账户新建时，自动创建一个Active权限，并将该账户的地址填充到其中，默认域值为1，keys中仅包含该账户地址且权重为1。</p>
<h3 id="2-5-费用"><a href="#2-5-费用" class="headerlink" title="2.5 费用"></a><h2 id="2.5">2.5 费用</h2></h3><p>1、使用更新账户权限时，即 AccountPermissionUpdate 合约，收取100TRX。\<br>2、使用多重签名的交易时，即交易中包括两个及两个以上签名的交易，除交易费用外，另收取1TRX。\<br>3、可通过提议，修改以上费用。</p>
<h2 id="3-API"><a href="#3-API" class="headerlink" title="3.API"></a><h2 id="3">3.API</h2></h2><h3 id="3-1-修改权限"><a href="#3-1-修改权限" class="headerlink" title="3.1 修改权限"></a><h2 id="3.1">3.1 修改权限</h2></h3><p><code>AccountPermissionUpdateContract</code>，修改权限步骤如下：</p>
<p>1、使用接口<code>getaccount</code>查询账户，并获取原权限\<br>2、修改permission\<br>3、创建合约，签名\<br>4、发送交易</p>
<p><strong>http-demo</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">http://&#123;&#123;host&#125;&#125;:&#123;&#123;port&#125;&#125;/wallet/accountpermissionupdate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;owner_address&quot;: &quot;41ffa9466d5bf6bb6b7e4ab6ef2b1cb9f1f41f9700&quot;,</span><br><span class="line">  &quot;owner&quot;: &#123;</span><br><span class="line">    &quot;type&quot;: 0,</span><br><span class="line">    &quot;permission_name&quot;: &quot;owner&quot;,</span><br><span class="line">    &quot;threshold&quot;: 2,</span><br><span class="line">    &quot;keys&quot;: [&#123;</span><br><span class="line">        &quot;address&quot;: &quot;41F08012B4881C320EB40B80F1228731898824E09D&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;address&quot;: &quot;41DF309FEF25B311E7895562BD9E11AAB2A58816D2&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;address&quot;: &quot;41BB7322198D273E39B940A5A4C955CB7199A0CDEE&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;witness&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: 1,</span><br><span class="line">      &quot;permission_name&quot;: &quot;witness&quot;,</span><br><span class="line">      &quot;threshold&quot;: 1,</span><br><span class="line">      &quot;keys&quot;: [&#123;</span><br><span class="line">          &quot;address&quot;: &quot;41F08012B4881C320EB40B80F1228731898824E09D&quot;,</span><br><span class="line">          &quot;weight&quot;: 1</span><br><span class="line">        &#125; </span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;actives&quot;: [&#123;</span><br><span class="line">    &quot;type&quot;: 2,</span><br><span class="line">    &quot;permission_name&quot;: &quot;active0&quot;,</span><br><span class="line">    &quot;threshold&quot;: 3,</span><br><span class="line">    &quot;operations&quot;: &quot;7fff1fc0037e0000000000000000000000000000000000000000000000000000&quot;,</span><br><span class="line">    &quot;keys&quot;: [&#123;</span><br><span class="line">        &quot;address&quot;: &quot;41F08012B4881C320EB40B80F1228731898824E09D&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;address&quot;: &quot;41DF309FEF25B311E7895562BD9E11AAB2A58816D2&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;address&quot;: &quot;41BB7322198D273E39B940A5A4C955CB7199A0CDEE&quot;,</span><br><span class="line">        &quot;weight&quot;: 1</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">参数字段的定义及限制，请查看&quot;2.1 结构说明&quot;。</span><br></pre></td></tr></table></figure></p>
<p><strong>active权限中operations的计算示例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//指定需要支持的合约id(查看proto中Transaction.ContractType定义)，这里包含除AccountPermissionUpdateContract（id=46）以外的所有合约  </span></span><br><span class="line">  Integer[] contractId = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">31</span>,</span><br><span class="line">      <span class="number">32</span>, <span class="number">33</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>&#125;;</span><br><span class="line">  List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(contractId)); </span><br><span class="line">  <span class="keyword">byte</span>[] operations = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">32</span>];</span><br><span class="line">  list.forEach(e -&gt; &#123;</span><br><span class="line">    operations[e / <span class="number">8</span>] |= (<span class="number">1</span> &lt;&lt; e % <span class="number">8</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//7fff1fc0037e0000000000000000000000000000000000000000000000000000</span></span><br><span class="line">  System.out.println(ByteArray.toHexString(operations));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-执行合约"><a href="#3-2-执行合约" class="headerlink" title="3.2 执行合约"></a><h2 id="3.2">3.2 执行合约</h2></h3><p>1、创建交易，与非多重签名交易的构建过程相同\<br>2、指定Permission_id，默认为0，表示owner-permission, demo见<a href="https://github.com/tronprotocol/wallet-cli/commit/ff9122f2236f1ce19cbb9ba9f0494c8923a3d10c#diff-a63fa7484f62fe1d8fb27276c991a4e3R211" target="_blank" rel="noopener">https://github.com/tronprotocol/wallet-cli/commit/ff9122f2236f1ce19cbb9ba9f0494c8923a3d10c#diff-a63fa7484f62fe1d8fb27276c991a4e3R211</a> \<br>3、用户A签名，将签名后交易通过其他方式发送给B。\<br>4、用户B签名，将签名后交易通过其他方式发送给C。\<br>…\<br>n、最后一个完成签名的用户，将交易广播到节点。\<br>n+1、验证多重签名的权重之和大于域值则接受交易，否则拒绝交易</p>
<p>代码示例：</p>
<p><a href="https://github.com/tronprotocol/wallet-cli/blob/multi_sign_V2/src/main/java/org/tron/demo/MultiSignDemo.java" target="_blank" rel="noopener">https://github.com/tronprotocol/wallet-cli/blob/multi_sign_V2/src/main/java/org/tron/demo/MultiSignDemo.java</a></p>
<h3 id="3-3-其他新增接口"><a href="#3-3-其他新增接口" class="headerlink" title="3.3 其他新增接口"></a><h2 id="3.3">3.3 其他新增接口</h2></h3><p>接口详细说明，请查看Tron-http.md与波场钱包RPC-API.md \<br>1、增加签名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST  http://127.0.0.1:8090/wallet/addtransactionsign -d &apos;&#123;&quot;transaction&quot;: &quot;TransferContract&quot;, &quot;privateKey&quot;: &quot;permissionkey1&quot;&#125;&apos;</span><br><span class="line"> </span><br><span class="line">rpc AddSign (TransactionSign) returns (TransactionExtention) &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>2、查询已签名地址<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST  http://127.0.0.1:8090/wallet/getapprovedlist -d &apos;&#123;&quot;transaction&quot;&#125;&apos;</span><br><span class="line"> </span><br><span class="line">rpc GetTransactionApprovedList(Transaction) returns (TransactionApprovedList) &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<p>3、查询交易签名权重<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST  http://127.0.0.1:8090/wallet/getsignweight -d &apos;&#123;&quot;transaction&quot;&#125;&apos;</span><br><span class="line"> </span><br><span class="line">rpc GetTransactionSignWeight (Transaction) returns (TransactionSignWeight) &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-其他"><a href="#4-其他" class="headerlink" title="4.其他"></a><h2 id="4">4.其他</h2></h2><p>1、支持多重签名后，创建账户时有什么变化？\<br>在升级到V3.5版本后，并且多重签名提议生效后，创建账户时将自动生成owner-permission以及一个active-permission，<br>其中owner-permission中仅包含一个key，权限及阈值都为1。active-permission中也包含一个key，权限及阈值都为1，并且<br>operations为”7fff1fc0037e0000000000000000000000000000000000000000000000000000”，表示支持除<br>AccountPermissionUpdateContract以外的所有操作。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/多重签名/" data-id="cjxcwb0tz0008sffmrfhfp9nk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/交易简介" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/交易简介/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/交易简介/">交易简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="交易"><a href="#交易" class="headerlink" title="交易"></a>交易</h1><p><a href="#1">1.交易基本结构</a> \<br><a href="#2">2.交易费</a> \<br><a href="#3">3.交易签名流程</a></p>
<h2 id="1-交易基本结构"><a href="#1-交易基本结构" class="headerlink" title="1.交易基本结构"></a><h2 id="1">1.交易基本结构</h2></h2><p>Tron网络中的账户包含三中，普通账户，Token账户和合约账户。</p>
<ul>
<li>普通账户：可以进行各种基本操作。</li>
<li>Token账户：由普通账户发布Token的账户，目前没有使用。</li>
<li>合约账户：智能合约的账户，由普通账户创建，并可以被触发的账户。</li>
</ul>
<p>账户基本结构</p>
<pre><code>message Account {
  /* frozen balance */
  message Frozen {
    int64 frozen_balance = 1;  // 冻结TRX的金额，单位Sun
    int64 expire_time = 2;     // 冻结资金到期时间
  }
  bytes account_name = 1;      // 账户的名称
  AccountType type = 2;        // 账户的类型
  // the create address
  bytes address = 3;           // 账户地址
  // the trx balance
  int64 balance = 4;           // 账户中TRX的余额 
  // the votes
  repeated Vote votes = 5;     // 投票各个超级节点候选人的票数  
  // the other asset owned by this account
  map&lt;string, int64&gt; asset = 6;// 其他资产的名称+order 和余额的映射列表
  // latest asset operation time

  // the frozen balance
  repeated Frozen frozen = 7;  // 冻结TRX的列表
  // bandwidth, get from frozen
  int64 net_usage = 8;         // 通过冻结TRX获取Bandwidth points的使用量

  // this account create time
  int64 create_time = 0x09;    // 账户创建时间
  // this last operation time, including transfer, voting and so on. //FIXME fix grammar
  int64 latest_opration_time = 10; // 账户最后操作时间，包括转账，投票等
  // witness block producing allowance
  int64 allowance = 0x0B;      // 获取的奖励
  // last withdraw time
  int64 latest_withdraw_time = 0x0C;   // 最近一次提取奖励时间
  // not used so far
  bytes code = 13;
  bool is_witness = 14;        // 是否是超级节点候选人
  bool is_committee = 15;      // 是否是委员会成员
  // frozen asset(for asset issuer)
  repeated Frozen frozen_supply = 16;  // 冻结发布资产列表
  // asset_issued_name
  bytes asset_issued_name = 17;        // 该账户发布资产的名称，一个账户智能发布一种资产
  map&lt;string, int64&gt; latest_asset_operation_time = 18;

  int64 free_net_usage = 19;           // 免费Bandwidth points的使用量
  map&lt;string, int64&gt; free_asset_net_usage = 20;    // 操作每种发布资产使用免费Bandwidth points使用量
  int64 latest_consume_time = 21;      // 最近一次使用 冻结TRX获取到Bandwidth points 的时间
  int64 latest_consume_free_time = 22; // 最近一次使用免费Bandwidth points的时间

  bytes account_id = 23;               // 账户ID

  message AccountResource {
    // energy resource, get from frozen
    int64 energy_usage = 1;                    // 通过冻结TRX获取Energy的使用量
    // the frozen balance for energy
    Frozen frozen_balance_for_energy = 2;      // 为获取Energy冻结的TRX的数量
    int64 latest_consume_time_for_energy = 3;  // 最近一次消费冻结TRX获取到Energy的时间

    // storage resource, get from market
    int64 storage_limit = 6;                   // 存储消耗Energy最大使用量限制
    int64 storage_usage = 7;                   // 存储消耗Energy的量
    int64 latest_exchange_storage_time = 8;   
  }
  AccountResource account_resource = 26;       // 账户资源概况信息

  bytes codeHash = 30;
}
</code></pre><p>交易基本结构   </p>
<pre><code>message Transaction {
  message Contract {
    enum ContractType {
      AccountCreateContract = 0;
      TransferContract = 1;
      TransferAssetContract = 2;
      VoteAssetContract = 3;
      VoteWitnessContract = 4;
      WitnessCreateContract = 5;
      AssetIssueContract = 6;
      WitnessUpdateContract = 8;
      ParticipateAssetIssueContract = 9;
      AccountUpdateContract = 10;
      FreezeBalanceContract = 11;
      UnfreezeBalanceContract = 12;
      WithdrawBalanceContract = 13;
      UnfreezeAssetContract = 14;
      UpdateAssetContract = 15;
      ProposalCreateContract = 16;
      ProposalApproveContract = 17;
      ProposalDeleteContract = 18;
      SetAccountIdContract = 19;
      CustomContract = 20;
      // BuyStorageContract = 21;
      // BuyStorageBytesContract = 22;
      // SellStorageContract = 23;
      CreateSmartContract = 30;
      TriggerSmartContract = 31;
      GetContract = 32;
      UpdateSettingContract = 33;
      ExchangeCreateContract = 41;
      ExchangeInjectContract = 42;
      ExchangeWithdrawContract = 43;
      ExchangeTransactionContract = 44;
    }
    ContractType type = 1;
    google.protobuf.Any parameter = 2;
    bytes provider = 3;
    bytes ContractName = 4;
  }

  message Result {
    enum code {
      SUCESS = 0;
      FAILED = 1;
    }
    enum contractResult {
      DEFAULT = 0;
      SUCCESS = 1;
      REVERT = 2;
      BAD_JUMP_DESTINATION = 3;
      OUT_OF_MEMORY = 4;
      PRECOMPILED_CONTRACT = 5;
      STACK_TOO_SMALL = 6;
      STACK_TOO_LARGE = 7;
      ILLEGAL_OPERATION = 8;
      STACK_OVERFLOW = 9;
      OUT_OF_ENERGY = 10;
      OUT_OF_TIME = 11;
      JVM_STACK_OVER_FLOW = 12;
      UNKNOWN = 13;
    }
    int64 fee = 1;
    code ret = 2;
    contractResult contractRet = 3;

    int64 withdraw_amount = 15;
    int64 unfreeze_amount = 16;
  }

  message raw {
    bytes ref_block_bytes = 1;
    int64 ref_block_num = 3;
    bytes ref_block_hash = 4;
    int64 expiration = 8;
    repeated authority auths = 9;
    // data not used
    bytes data = 10;
    //only support size = 1,  repeated list here for extension
    repeated Contract contract = 11;
    // scripts not used
    bytes scripts = 12;
    int64 timestamp = 14;
    int64 fee_limit = 18;
  }

  raw raw_data = 1;
  // only support size = 1,  repeated list here for muti-sig extension
  repeated bytes signature = 2;    // 交易发起者的签名列表，目前只支持一个
  repeated Result ret = 5;
}
</code></pre><h2 id="2-交易费"><a href="#2-交易费" class="headerlink" title="2.交易费"></a><h2 id="2">2.交易费</h2></h2><p>在Tron网络中的交易总体来说是免费的，但因系统资源的限制，为保证公平公正的原则，对网络中的带宽（Bandwidth points），CPU和存储资源有一定的限制。  </p>
<ul>
<li>普通交易仅消耗Bandwidth points，可以通过冻结TRX获取一定量的Bandwidth points，也可以使用账户中的免费Bandwidth points。当Bandwidth points不足时，会烧TRX。</li>
<li>智能合约的操作不仅要消耗Bandwidth points，还会消耗Energy。与Bandwidth points一样，可以通过冻结TRX可以获取一定量的Energy。当Energy不足时，会烧TRX。</li>
<li>所有的查询交易是完全免费的，不消耗Bandwidth points，也不消耗Energy。</li>
</ul>
<h2 id="3-交易签名流程"><a href="#3-交易签名流程" class="headerlink" title="3.交易签名流程"></a><h2 id="3">3.交易签名流程</h2></h2><h2 id="一、步骤"><a href="#一、步骤" class="headerlink" title="一、步骤"></a>一、步骤</h2><ol>
<li>取交易的rawdata，转成byte[]格式。</li>
<li>对rawdata进行sha256运算。</li>
<li>用交易每个合约中地址对应的私钥（现在一般就是一个合约，一个私钥），对sha256的结果进行签名。</li>
<li>把签名结果添加到交易中。</li>
</ol>
<h2 id="二、签名算法"><a href="#二、签名算法" class="headerlink" title="二、签名算法"></a>二、签名算法</h2><p>1, ECDSA算法，SECP256K。<br>2, 签名示例数据  </p>
<pre><code>priKey:::8e812436a0e3323166e1f0e8ba79e19e217b2c4a53c970d4cca0cfb1078979df 
pubKey::04a5bb3b28466f578e6e93fbfd5f75cee1ae86033aa4bbea690e3312c087181eb366f9a1d1d6a437a9bf9fc65ec853b9fd60fa322be3997c47144eb20da658b3d1 
hash:::159817a085f113d099d3d93c051410e9bfe043cc5c20e43aa9a083bf73660145 
r:::38b7dac5ee932ac1bf2bc62c05b792cd93c3b4af61dc02dbb4b93dacb758123f 
s:::08bf123eabe77480787d664ca280dc1f20d9205725320658c39c6c143fd5642d 
v:::0  
</code></pre><p>   注意：签名结果应该是65字节。 r 32字节， s 32字节，v 1个字节。</p>
<p>3, fullnode节点收到交易后会进行验签，由hash 和 r、s、v计算出一个地址，与合约中的地址进行比较，相同则为验签通过。</p>
<h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre><code>public static Transaction sign(Transaction transaction, ECKey myKey) {   Transaction.Builder transactionBuilderSigned = transaction.toBuilder();    byte[] hash = sha256(transaction.getRawData().toByteArray());   List&lt;Contract&gt; listContract = transaction.getRawData().getContractList();   for (int i = 0; i &lt; listContract.size(); i++) { ECDSASignature signature = myKey.sign(hash); ByteString bsSign = ByteString.copyFrom(signature.toByteArray()); transactionBuilderSigned.addSignature(     bsSign);//Each contract may be signed with a different private key in the future.  }
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/交易简介/" data-id="cjxcwb0u3000bsffmoc76pmh3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/波场钱包RPC-API" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/波场钱包RPC-API/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/波场钱包RPC-API/">波场钱包RPC-API</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="波场钱包RPC-API"><a href="#波场钱包RPC-API" class="headerlink" title="波场钱包RPC-API"></a>波场钱包RPC-API</h1><p><a href="#API的具体定义请参考">API的具体定义请参考</a>\<br><a href="#你可能需要经常用到的如下几个API">你可能需要经常用到的如下几个API</a>\</p>
<p><a href="#1">1. 获取账户信息</a>\<br><a href="#2">2. 转让波场币</a>\<br><a href="#3">3. 广播交易</a>\<br><a href="#4">4. 创建账户</a>\<br><a href="#5">5. 更新账户</a>\<br><a href="#6">6. 投票</a>\<br><a href="#7">7. 通证发行</a>\<br><a href="#8">8. 查询超级代表候选人列表</a>\<br><a href="#9">9. 申请成为超级代表候选人</a>\<br><a href="#10">10. 更新超级代表候选人信息</a>\<br><a href="#11">11. 转让通证</a>\<br><a href="#12">12. 参与通证发行</a>\<br><a href="#14">14. 查询所有通证列表</a>\<br><a href="#13">13. 查询所有节点</a>\<br><a href="#15">15. 查询某个账户发行的通证列表</a>\<br><a href="#16">16. 按通证名称查询通证信息</a>\<br><a href="#17">17. 查询当前时间有效发行的通证列表</a>\<br><a href="#18">18. 获取当前区块</a>\<br><a href="#19">19. 按照高度获取区块</a>\<br><a href="#20">20. 获取交易总数</a>\<br><a href="#21">21. 通过ID查询交易</a>\<br><a href="#22">22. 通过时间查询交易（已删除）</a>\<br><a href="#23">23. 通过地址查询所有发起交易</a>\<br><a href="#24">24. 通过地址查询所有接收交易</a>\<br><a href="#25">25. 锁定资金</a>\<br><a href="#26">26. 解除资金锁定</a>\<br><a href="#27">27. 赎回出块奖励</a>\<br><a href="#28">28. 解冻通证</a>\<br><a href="#29">29. 查询下次维护时刻</a>\<br><a href="#30">30. 查询交易信息</a>\<br><a href="#31">31. 根据ID查询区块</a>\<br><a href="#32">32. 更新通证</a>\<br><a href="#33">33. 分页查询通证列表</a>\<br><a href="#34">34. 对交易进行签名</a>\<br><a href="#35">35. 创建地址和秘钥</a>\<br><a href="#36">36. TRX快捷转账</a>\<br><a href="#37">37. 生成地址和私钥</a>\<br><a href="#38">38. 转让波场币2</a>\<br><a href="#39">39. 更新账户2</a>\<br><a href="#40">40. 投票2</a>\<br><a href="#41">41. 通证发行2</a>\<br><a href="#42">42. 更新超级代表候选人信息2</a>\<br><a href="#43">43. 创建账户2</a>\<br><a href="#44">44. 申请成为超级代表候选人2</a>\<br><a href="#45">45. 转让通证2</a>\<br><a href="#46">46. 参与通证发行2</a>\<br><a href="#47">47. 锁定资金2</a>\<br><a href="#48">48. 解除资金锁定2</a>\<br><a href="#49">49. 解冻通证2</a>\<br><a href="#50">50. 赎回出块奖励2</a>\<br><a href="#51">51. 更新通证2</a>\<br><a href="#52">52. 获取当前区块2</a>\<br><a href="#53">53. 按照高度获取区块2</a>\<br><a href="#54">54. 分页获取区块2</a>\<br><a href="#55">55. 查询最后区块2</a>\<br><a href="#57">57. 通过地址查询所有发起交易2</a>\<br><a href="#58">58. 通过地址查询所有接收交易2</a>\<br><a href="#59">59. 创建交易对</a>\<br><a href="#60">60. 交易所注资</a>\<br><a href="#61">61. 交易所撤资</a>\<br><a href="#62">62. 交易所交易</a>\<br><a href="#63">63. 查询所有交易对</a>\<br><a href="#64">64. 查询指定交易对</a>\<br><a href="#65">65. 分页查询交易对</a>\<br><a href="#66">66. 创建提议</a>\<br><a href="#67">67. 赞成提议</a>\<br><a href="#68">68. 删除提议</a>\<br><a href="#69">69. 查询所有提议</a>\<br><a href="#70">70. 分页查询提议</a>\<br><a href="#71">71. 查询指定提议</a> \<br><a href="#72">72. 查询资源委派账户索引</a> \<br><a href="#73">73. 查询资源委派的详细信息</a> \<br><a href="#74">74. 通证快捷转账</a> \<br><a href="#75">75. 通证快捷转账（通过私钥）</a><br><a href="#76">76. 更新用户权限（用于多重签名）</a><br><a href="#77">77. 增加签名（用于多重签名）</a><br><a href="#78">78. 查询已签名地址（用于多重签名）</a><br><a href="#79">79. 查询交易签名权重（用于多重签名）</a> \<br><a href="#80">80. 部署智能合约 </a>\<br><a href="#81">81. 执行智能合约 </a></p>
<h2 id="API的具体定义请参考"><a href="#API的具体定义请参考" class="headerlink" title="API的具体定义请参考"></a><h2 id="API的具体定义请参考">API的具体定义请参考</h2></h2><p><a href="https://github.com/tronprotocol/java-tron/blob/develop/src/main/protos/api/api.proto" target="_blank" rel="noopener">https://github.com/tronprotocol/java-tron/blob/develop/src/main/protos/api/api.proto</a></p>
<h2 id="你可能需要经常用到的如下几个API"><a href="#你可能需要经常用到的如下几个API" class="headerlink" title="你可能需要经常用到的如下几个API"></a><h2 id="你可能需要经常用到的如下几个API">你可能需要经常用到的如下几个API</h2></h2><ol>
<li>如何获取账号基本信息（类比比特币 getinfo）<br>GetAccount</li>
<li>如何获取余额（类比比特币：getbalance）<br>GetAccount</li>
<li>如何生成一个地址（类比比特币：getnewaddress）<br>可以在本地生成一个地址<br>可以通过一个已经存在的账号给一个新地址转账从而在区块链上生成一个新地址，通过CreateTransaction（TransferContract）完成</li>
<li>如何获取一个地址的历史交易（类比比特币：listtransactions）<br>GetTransactionsFromThis<br>GetTransactionsToThis</li>
<li>如何校验地址具有正确的格式  </li>
</ol>
<ul>
<li>本地校验：经过decode58check后，会得到一个长度是21的byte数组，第一个字节是0x41(mainnet) 或者 0xa0(testnet).  </li>
<li>如果想要验证一个地址是否存在于区块链上，请求API GetAccount。</li>
</ul>
<h2 id="1-获取账户信息"><a href="#1-获取账户信息" class="headerlink" title="1. 获取账户信息"></a><h2 id="1">1. 获取账户信息</h2></h2><p>1.1    接口声明<br>rpc GetAccount (Account) returns (Account) {};<br>1.2    提供节点<br>fullnode、soliditynode。<br>1.3    参数说明<br>Account：只需要输入address即可。<br>1.4    返回值<br>Account：返回账户所有的详细信息。<br>1.5    功能说明<br>查询余额列表。从返回的Account中可以展示所有的资产信息。</p>
<h2 id="2-转让波场币"><a href="#2-转让波场币" class="headerlink" title="2. 转让波场币"></a><h2 id="2">2. 转让波场币</h2></h2><p>2.1    接口声明<br>rpc CreateTransaction (TransferContract) returns (Transaction)　{};<br>2.2    提供节点<br>fullnode。<br>2.3    参数说明<br>TransferContract：包含提供方地址、接收方地址、金额，其中金额的单位为sun。<br>2.4    返回值<br>Transaction：返回包含转账合约的交易，钱包签名后再请求广播交易。<br>2.5    功能说明<br>转账。创建一个转账的交易。</p>
<h2 id="3-广播交易"><a href="#3-广播交易" class="headerlink" title="3. 广播交易"></a><h2 id="3">3. 广播交易</h2></h2><p>3.1    接口声明<br>rpc BroadcastTransaction (Transaction) returns (Return) {};<br>3.2    提供节点<br>fullnode。<br>3.3    参数说明<br>Transaction：已经由钱包签名的交易。波场中需要改变区块链状态的操作都封装在交易中。<br>3.4    返回值<br>Return：成功或失败。广播交易前会预执行交易，返回其结果。注意：返回成功不一定保证交易成功。<br>3.5    功能说明<br>转账、投票、发行通证、参与通证发行等。将已签名的交易信息，发送到节点，由节点验证后广播到网络中。</p>
<h2 id="4-创建账户"><a href="#4-创建账户" class="headerlink" title="4. 创建账户"></a><h2 id="4">4. 创建账户</h2></h2><p>4.1    接口声明<br>rpc CreateAccount (AccountCreateContract) returns (Transaction){};<br>4.2    提供节点<br>fullnode。<br>4.3    参数说明<br>AccountCreateContract：包含账户类型、账户地址。<br>4.4    返回值<br>Transaction：返回包含创建账户的交易，钱包签名后再请求广播交易。<br>4.5    功能说明<br>创建账号并写入区块链。应该先离线生成一个地址，再通过该API激活该地址。</p>
<h2 id="5-更新账户"><a href="#5-更新账户" class="headerlink" title="5. 更新账户"></a><h2 id="5">5. 更新账户</h2></h2><p>5.1    接口声明<br>rpc UpdateAccount (AccountUpdateContract) returns (Transaction){};<br>5.2    提供节点<br>fullnode。<br>5.3    参数说明<br>AccountUpdateContract：包含账户名称、账户地址。<br>5.4    返回值<br>Transaction：返回包含更新账户的交易，钱包签名后再请求广播交易。<br>5.5    功能说明<br>更新账户名称。</p>
<h2 id="6-投票"><a href="#6-投票" class="headerlink" title="6. 投票"></a><h2 id="6">6. 投票</h2></h2><p>6.1    接口声明<br>rpc VoteWitnessAccount (VoteWitnessContract) returns (Transaction){};<br>6.2    提供节点<br>fullnode。<br>6.3    参数说明<br>VoteWitnessContract：包含投票人地址和一个投票对象列表(最多不能超过30个投票对象)，包含候选人地址和投票数。<br>6.4    返回值<br>Transaction：返回包含投票的交易，钱包签名后再请求广播交易。<br>6.5    功能说明<br>投票功能。只能对超级代表候选人进行投票，投票总数量不能大于账户锁定资金的数量，参见25 锁定资金。</p>
<h2 id="7-通证发行"><a href="#7-通证发行" class="headerlink" title="7. 通证发行"></a><h2 id="7">7. 通证发行</h2></h2><p>7.1    接口声明<br>rpc CreateAssetIssue (AssetIssueContract) returns (Transaction) {};<br>7.2    提供节点<br>fullnode。<br>7.3    参数说明<br>AssetIssueContract：包含发行人地址、通证名称、总发行量、波场币vs通证汇兑比例、开始时间、结束时间、衰减率、投票分数、详细描述、url、每账户最多消耗带宽值，总带宽消耗值以及token冻结资产。<br>7.4    返回值<br>Transaction：返回通证发行的交易，钱包签名后再请求广播交易。<br>7.5    功能说明<br>发行通证。所有人都可以发行通证，发行通证会消耗1024个trx。发行通证后，在有效期内任何人都可以参与通证发行，用trx按照比例兑换通证。</p>
<ul>
<li>示例：</li>
</ul>
<p><code>assetissue password abc 1000000 1 1 2018-5-31 2018-6-30 abcdef a.com 1000 1000000 200000 180 300000 365</code> </p>
<p>以上命令的发行了名为abc的资产，发行总量为100万，abc与TRX的兑换比例为1:1，发行日期为2018-5-31至2018-6-30，描述为abcdef，网址为a.com，<br>每个账户每天的token转账最多消耗自己1000 bandwidth points，整个网络每天最多消耗自己1000000 bandwidth points。其中20万锁仓180天，30万锁仓365天。</p>
<h2 id="8-查询超级代表候选人列表"><a href="#8-查询超级代表候选人列表" class="headerlink" title="8. 查询超级代表候选人列表"></a><h2 id="8">8. 查询超级代表候选人列表</h2></h2><p>8.1    接口声明<br>rpc ListWitnesses (EmptyMessage) returns (WitnessList) {};<br>8.2    提供节点<br>fullnode、soliditynode。<br>8.3    参数说明<br>EmptyMessage：空。<br>8.4 返回值<br>WitnessList： Witness的列表。所有超级代表的候选人详细信息。<br>8.5    功能说明<br>投票前要查询所有候选人，并且展示出详细信息，供用户选择投票。</p>
<h2 id="9-申请成为超级代表候选人"><a href="#9-申请成为超级代表候选人" class="headerlink" title="9. 申请成为超级代表候选人"></a><h2 id="9">9. 申请成为超级代表候选人</h2></h2><p>9.1 接口声明<br>rpc CreateWitness (WitnessCreateContract) returns (Transaction) {};<br>9.2 提供节点<br>fullnode。<br>9.3 参数说明<br>WitnessCreateContract：包含账户地址、Url。<br>9.4 返回值<br>Transaction：返回包含申请成为候选人的交易，钱包签名后再请求广播交易。<br>9.5 功能说明<br>每个波场用户都可以申请成为超级代表候选人。要求账户在区块链上已经创建。</p>
<h2 id="10-更新超级代表候选人信息"><a href="#10-更新超级代表候选人信息" class="headerlink" title="10. 更新超级代表候选人信息"></a><h2 id="10">10. 更新超级代表候选人信息</h2></h2><p>10.1 接口声明<br>rpc UpdateWitness (WitnessUpdateContract) returns (Transaction) {};<br>10.2 提供节点<br>fullnode。<br>10.3 参数说明<br>WitnessUpdateContract：包含账户地址、Url。<br>10.4 返回值<br>Transaction：返回包含更新候选人信息的交易，钱包签名后再请求广播交易。<br>10.5 功能说明<br>更新超级代表的url。</p>
<h2 id="11-转让通证"><a href="#11-转让通证" class="headerlink" title="11. 转让通证"></a><h2 id="11">11. 转让通证</h2></h2><p>11.1 接口声明<br>rpc TransferAsset (TransferAssetContract) returns (Transaction){};<br>11.2 提供节点<br>fullnode。<br>11.3 参数说明<br>TransferAssetContract：包含通证名称、提供方地址、接收方地址、通证数量。<br>11.4 返回值<br>Transaction：返回包含转让通证的交易，钱包签名后再请求广播交易。<br>11.5 功能说明<br>转让通证。创建一个转让通证的交易。</p>
<h2 id="12-参与通证发行"><a href="#12-参与通证发行" class="headerlink" title="12. 参与通证发行"></a><h2 id="12">12. 参与通证发行</h2></h2><p>12.1 接口声明<br>rpc ParticipateAssetIssue (ParticipateAssetIssueContract) returns (Transaction){};<br>12.2 提供节点<br>fullnode。<br>12.3 参数说明<br>ParticipateAssetIssueContract：包含参与方地址、发行方地址、通证名称、参与金额，其中金额的单位为sun。<br>12.4 返回值<br>Transaction：返回包含参与通证发行的交易，钱包签名后再请求广播交易。<br>12.5 功能说明<br>参与通证发行。</p>
<h2 id="13-查询所有节点"><a href="#13-查询所有节点" class="headerlink" title="13.  查询所有节点"></a><h2 id="13">13.  查询所有节点</h2></h2><p>13.1 接口声明<br>rpc ListNodes (EmptyMessage) returns (NodeList) {};<br>13.2 提供节点<br>fullnode、soliditynode。<br>13.3 参数说明<br>EmptyMessage：空。<br>13.4 返回值<br>NodeList：Node的列表，包含ip和端口。<br>13.5 功能说明<br>列举所有在线的节点ip和端口。</p>
<h2 id="14-查询所有通证列表"><a href="#14-查询所有通证列表" class="headerlink" title="14. 查询所有通证列表"></a><h2 id="14">14. 查询所有通证列表</h2></h2><p>14.1 接口声明<br>rpc GetAssetIssueList (EmptyMessage) returns (AssetIssueList) {};<br>14.2 提供节点<br>fullnode、soliditynode。<br>14.3 参数说明<br>EmptyMessage：空<br>14.4 返回值<br>AssetIssueList： AssetIssueContract的列表。所有已发行通证详细信息。<br>14.5 功能说明<br>全部通证列表。展示所有通证，供用户选择参与。</p>
<h2 id="15-查询某个账户发行的通证列表"><a href="#15-查询某个账户发行的通证列表" class="headerlink" title="15. 查询某个账户发行的通证列表"></a><h2 id="15">15. 查询某个账户发行的通证列表</h2></h2><p>15.1 接口声明<br>rpc GetAssetIssueByAccount (Account) returns (AssetIssueList) {};<br>15.2 提供节点<br>fullnode、soliditynode。<br>15.3 参数说明<br>Account：只需要输入address即可<br>15.4 返回值<br>AssetIssueList： AssetIssueContract的列表。<br>15.5 功能说明<br>查询某个账户发行的所有通证。</p>
<h2 id="16-按通证名称查询通证信息"><a href="#16-按通证名称查询通证信息" class="headerlink" title="16. 按通证名称查询通证信息"></a><h2 id="16">16. 按通证名称查询通证信息</h2></h2><p>16.1 接口声明<br>rpc GetAssetIssueByName (BytesMessage) returns (AssetIssueContract) {};<br>16.2 提供节点<br>fullnode、soliditynode。<br>16.3 参数说明<br>BytesMessage：通证名称。<br>16.4 返回值<br>AssetIssueContract：通证详细信息。<br>16.5 功能说明<br>按照通证名称查询通证。通证名称在波场中确保唯一。</p>
<h2 id="17-查询当前时间有效发行的通证列表"><a href="#17-查询当前时间有效发行的通证列表" class="headerlink" title="17. 查询当前时间有效发行的通证列表"></a><h2 id="17">17. 查询当前时间有效发行的通证列表</h2></h2><p>17.1 接口声明<br>rpc GetAssetIssueListByTimestamp (NumberMessage) returns (AssetIssueList){};<br>17.2 提供节点<br>soliditynode。<br>17.3 参数说明<br>NumberMessage：当前时间。相对于1970年的毫秒数。<br>17.4 返回值<br>AssetIssueList： AssetIssueContract的列表。所有正在发行的通证详细信息。<br>17.5 功能说明<br>全部通证列表。展示当前发行通证，供用户选择参与。</p>
<h2 id="18-获取当前区块"><a href="#18-获取当前区块" class="headerlink" title="18. 获取当前区块"></a><h2 id="18">18. 获取当前区块</h2></h2><p>18.1 接口声明<br>rpc GetNowBlock (EmptyMessage) returns (Block) {};<br>18.2 提供节点<br>fullnode、soliditynode。<br>18.3 参数说明<br>EmptyMessage：空。<br>18.4 返回值<br>Block：当前区块信息。<br>18.5 功能说明<br>获取当前最新的区块。</p>
<h2 id="19-按照高度获取区块"><a href="#19-按照高度获取区块" class="headerlink" title="19. 按照高度获取区块"></a><h2 id="19">19. 按照高度获取区块</h2></h2><p>19.1 接口声明<br>rpc GetBlockByNum (NumberMessage) returns (Block) {};<br>19.2 提供节点<br>fullnode、soliditynode。<br>19.3 参数说明<br>NumberMessage：区块高度。<br>19.4 返回值<br>Block：区块信息。<br>19.5 功能说明<br>获取指定高度的区块，如果找不到则返回创世区块。</p>
<h2 id="20-获取交易总数"><a href="#20-获取交易总数" class="headerlink" title="20. 获取交易总数"></a><h2 id="20">20. 获取交易总数</h2></h2><p>20.1 接口声明<br>rpc TotalTransaction (EmptyMessage) returns (NumberMessage) {};<br>20.2 提供节点<br>fullnode、soliditynode。<br>20.3 参数说明<br>EmptyMessage：空。<br>20.4 返回值<br>NumberMessage：交易总数。<br>20.5 功能说明<br>获取交易的总数量。</p>
<h2 id="21-通过ID查询交易"><a href="#21-通过ID查询交易" class="headerlink" title="21. 通过ID查询交易"></a><h2 id="21">21. 通过ID查询交易</h2></h2><p>21.1 接口声明<br>rpc getTransactionById (BytesMessage) returns (Transaction) {};<br>21.2 提供节点<br>soliditynode。<br>21.3 参数说明<br>BytesMessage：交易ID，也就是其Hash值。<br>21.4 返回值<br>Transaction：被查询的交易。<br>21.5 功能说明<br>通过ID查询交易的详细信息，ID就是交易数据的Hash值。</p>
<h2 id="22-通过时间查询交易（已删除）"><a href="#22-通过时间查询交易（已删除）" class="headerlink" title="22. 通过时间查询交易（已删除）"></a><h2 id="22">22. 通过时间查询交易（已删除）</h2></h2><p>22.1 接口声明<br>rpc getTransactionsByTimestamp (TimeMessage) returns (TransactionList) {};<br>22.2 提供节点<br>soliditynode。<br>22.3 参数说明<br>TimeMessage：包含开始时间和结束时间。<br>22.4 返回值<br>TransactionList：交易列表。<br>22.5 功能说明<br>通过起止时间查询所有发生的交易。</p>
<h2 id="23-通过地址查询所有发起交易-新版本将不再支持"><a href="#23-通过地址查询所有发起交易-新版本将不再支持" class="headerlink" title="23. 通过地址查询所有发起交易(新版本将不再支持)"></a><h2 id="23">23. 通过地址查询所有发起交易(新版本将不再支持)</h2></h2><p>23.1 接口声明<br>rpc getTransactionsFromThis (Account) returns (TransactionList) {};<br>23.2 提供节点<br>soliditynode。<br>23.3 参数说明<br>Account:发起方账户，只需要地址。<br>offset: 分页的起始值，大于10000将提示错误。<br>limit:  分页大小，最大为50，这个值可能会调整。当limit&gt;50，或offset+limit&gt;10000时，调整后满足limit&lt;=50且offset+limit&lt;=10000<br>startTime:起始时间。<br>endTime: 结束时间，获取[startTime,endTime]时间段的交易。<br>23.4 返回值<br>TransactionList：交易列表，按照交易创建时间的降序排列。<br>total: 在[startTime,endTime]时间段内允许分页的最大交易数。<br>rangeTotal: 在[startTime,endTime]时间段内的所有交易数，则默认返回最近7天的数据。<br>23.5 功能说明<br>通过账户地址查询所有发起的交易。<br>23.6 备注说明<br>该接口在新版本节点中将不再提供，如需要该功能，可以使用中心节点提供的接口，47.90.247.237:8091/walletextension/gettransactionsfromthis,<br>使用参考getTransactionsFromThis。</p>
<h2 id="24-通过地址查询所有接收交易-新版本将不再支持"><a href="#24-通过地址查询所有接收交易-新版本将不再支持" class="headerlink" title="24. 通过地址查询所有接收交易(新版本将不再支持)"></a><h2 id="24">24. 通过地址查询所有接收交易(新版本将不再支持)</h2></h2><p>24.1 接口声明<br>rpc getTransactionsToThis (Account) returns (NumberMessage) {};<br>24.2 提供节点<br>soliditynode。<br>24.3 参数说明<br>Account：接收方账户，只需要地址。<br>offset: 分页的起始值，大于10000将提示错误。<br>limit:  分页大小，最大为50，这个值可能会调整。当limit&gt;50，或offset+limit&gt;10000时，调整后满足limit&lt;=50且offset+limit&lt;=10000<br>startTime:起始时间。<br>endTime: 结束时间，获取[startTime,endTime]时间段的交易，如果不传递，则默认返回最近7天的数据。<br>24.4 返回值<br>TransactionList：交易列表,按照交易创建时间的降序排列。<br>total: 在[startTime,endTime]时间段内允许分页的最大交易数。<br>rangeTotal: 在[startTime,endTime]时间段内的所有交易数。<br>24.5 功能说明<br>通过账户地址查询所有其它账户发起和本账户有关的交易。<br>24.6 备注说明<br>该接口在新版本节点中将不再提供，如需要该功能，可以使用中心节点提供的接口，47.90.247.237:8091/walletextension/gettransactionstothis,<br>使用参考getTransactionsToThis。</p>
<h2 id="25-锁定资金"><a href="#25-锁定资金" class="headerlink" title="25. 锁定资金"></a><h2 id="25">25. 锁定资金</h2></h2><p>25.1 接口声明<br>rpc FreezeBalance (FreezeBalanceContract) returns (Transaction) {};<br>25.2 提供节点<br>fullnode。<br>25.3 参数说明<br>FreezeBalanceContract：包含地址、锁定资金、锁定时间。目前锁定时间只能是3天。<br>25.4 返回值<br>Transaction：返回包含资金的交易，钱包签名后再请求广播交易。<br>25.5 功能说明<br>锁定资金将带来两个收益：<br>a.获得带宽。<br>b.获得投票的权利。</p>
<h2 id="26-解除资金锁定"><a href="#26-解除资金锁定" class="headerlink" title="26. 解除资金锁定"></a><h2 id="26">26. 解除资金锁定</h2></h2><p>26.1 接口声明<br>rpc UnfreezeBalance (UnfreezeBalanceContract) returns (Transaction) {};<br>26.2 提供节点<br>fullnode。<br>26.3 参数说明<br>UnfreezeBalanceContract：包含地址。<br>26.4 返回值<br>Transaction：返回交易，钱包签名后再请求广播交易。<br>26.5 功能说明<br>锁定资金3天之后才允许解除锁定。解除锁定，将清除投票记录和带宽。</p>
<h2 id="27-赎回出块奖励"><a href="#27-赎回出块奖励" class="headerlink" title="27. 赎回出块奖励"></a><h2 id="27">27. 赎回出块奖励</h2></h2><p>27.1 接口声明<br>rpc WithdrawBalance (WithdrawBalanceContract) returns (Transaction) {};<br>27.2 提供节点<br>fullnode。<br>27.3 参数说明<br>WithdrawBalanceContract：包含地址。<br>27.4 返回值<br>Transaction：返回交易，钱包签名后再请求广播交易。<br>27.5 功能说明<br>本接口仅提供给超级代表。超级代表记账成功后，将获得奖励，奖励不直接增加到账户余额上。每24小时允许提取一次到账户余额。</p>
<h2 id="28-解冻通证"><a href="#28-解冻通证" class="headerlink" title="28. 解冻通证"></a><h2 id="28">28. 解冻通证</h2></h2><p>28.1 接口声明<br>rpc UnfreezeAsset (UnfreezeAssetContract) returns (Transaction) {};<br>28.2 提供节点<br>fullnode。<br>28.3 参数说明<br>UnfreezeAssetContract：包含地址。<br>28.4 返回值<br>Transaction：返回交易，钱包签名后再请求广播交易。<br>28.5 功能说明<br>通证发行者解冻发行时冻结的通证。</p>
<h2 id="29-查询下次维护时刻"><a href="#29-查询下次维护时刻" class="headerlink" title="29. 查询下次维护时刻"></a><h2 id="29">29. 查询下次维护时刻</h2></h2><p>29.1 接口声明<br>rpc GetNextMaintenanceTime (EmptyMessage) returns (NumberMessage) {};<br>29.2 提供节点<br>fullnode。<br>29.3 参数说明<br>EmptyMessage：无需参数<br>29.4 返回值<br>NumberMessage：下次维护时刻<br>29.5 功能说明<br>获取下次维护时刻</p>
<h2 id="30-查询交易信息"><a href="#30-查询交易信息" class="headerlink" title="30. 查询交易信息"></a><h2 id="30">30. 查询交易信息</h2></h2><p>30.1 接口声明<br>rpc GetTransactionInfoById (BytesMessage) returns (TransactionInfo) {};<br>30.2 提供节点<br>soliditynode。<br>30.3 参数说明<br>BytesMessage：交易ID<br>30.4 返回值<br>TransactionInfo：交易信息<br>30.5 功能说明<br>查询交易的费用、所在区块、所在区块时间戳</p>
<h2 id="31-根据ID查询区块"><a href="#31-根据ID查询区块" class="headerlink" title="31.  根据ID查询区块"></a><h2 id="31">31.  根据ID查询区块</h2></h2><p>31.1 接口声明<br>rpc GetBlockById (BytesMessage) returns (Block) {};<br>31.2 提供节点<br>fullnode。<br>31.3 参数说明<br>BytesMessage：区块ID<br>31.4 返回值<br>Block：区块<br>31.5 功能说明<br>根据输入的区块的ID查询区块</p>
<h2 id="32-更新通证"><a href="#32-更新通证" class="headerlink" title="32.  更新通证"></a><h2 id="32">32.  更新通证</h2></h2><p>32.1 接口声明<br>rpc UpdateAsset (UpdateAssetContract) returns (Transaction) {};<br>32.2 提供节点<br>fullnode。<br>32.3 参数说明<br>UpdateAssetContract：包括通证发行者的地址、通证的描述、通证的url、每账户最多消耗带宽值、总带宽消耗值<br>32.4 返回值<br>Transaction：返回交易，钱包签名后再请求广播交易。<br>32.5 功能说明<br>只能由通证发行者发起，更新通证的描述、通证的url、每账户最多消耗带宽值、总带宽消耗值</p>
<h2 id="33-分页查询通证列表"><a href="#33-分页查询通证列表" class="headerlink" title="33. 分页查询通证列表"></a><h2 id="33">33. 分页查询通证列表</h2></h2><p>33.1 接口声明<br>rpc GetPaginatedAssetIssueList (PaginatedMessage) returns (AssetIssueList) {};<br>33.2 提供节点<br>fullnode、soliditynode。<br>33.3 参数说明<br>PaginatedMessage：起始查询下标 （从下标0开始计算）， 一页所取得的通证个数<br>33.4 返回值<br>AssetIssueList： AssetIssueContract的分页列表，发行通证详细信息。<br>33.5 功能说明<br>分页通证列表。分页展示通证，供用户选择参与。</p>
<h2 id="34-对交易进行签名"><a href="#34-对交易进行签名" class="headerlink" title="34. 对交易进行签名"></a><h2 id="34">34. 对交易进行签名</h2></h2><p>34.1 接口说明<br>rpc GetTransactionSign (TransactionSign) returns (Transaction) {};<br>34.2 提供节点<br>fullnode<br>34.3 参数说明<br>TransactionSign：待签名Transaction对象和签名用的private key<br>34.4 返回值<br>Transaction：签名的Transaction对象</p>
<h2 id="35-创建地址和秘钥"><a href="#35-创建地址和秘钥" class="headerlink" title="35. 创建地址和秘钥"></a><h2 id="35">35. 创建地址和秘钥</h2></h2><p>35.1 接口说明<br>rpc CreateAdresss (BytesMessage) returns (BytesMessage) {};<br>35.2 提供节点<br>fullnode<br>35.3 参数说明<br>BytesMessage：Passphrase<br>35.4 返回值<br>BytesMessage：地址</p>
<h2 id="36-TRX快捷转账"><a href="#36-TRX快捷转账" class="headerlink" title="36. TRX快捷转账"></a><h2 id="36">36. TRX快捷转账</h2></h2><p>36.1 接口说明<br>rpc EasyTransfer (EasyTransferMessage) returns (EasyTransferResponse) {};<br>36.2 提供节点<br>fullnode<br>36.3 参数说明<br>EasyTransferMessage：转账用的密码，toAddress，转账的数量<br>36.4 返回值<br>EasyTransferResponse：转账创建的transaction，交易ID，以及广播的结果result</p>
<h2 id="37-生成地址和私钥"><a href="#37-生成地址和私钥" class="headerlink" title="37. 生成地址和私钥"></a><h2 id="37">37. 生成地址和私钥</h2></h2><p>37.1 接口说明<br>rpc GenerateAddress (EmptyMessage) returns (AddressPrKeyPairMessage) {};<br>37.2 提供节点<br>fullnode, soliditynode<br>37.3 参数说明<br>EmptyMessage：空<br>37.4 返回值<br>AddressPrKeyPairMessage：生成地址，生成私钥<br>37.5 功能说明<br>可用于生成地址和私钥，请务必仅在受信断网节点调用，以免私钥外泄</p>
<h2 id="38-转让波场币2"><a href="#38-转让波场币2" class="headerlink" title="38. 转让波场币2"></a><h2 id="38">38. 转让波场币2</h2></h2><p>38.1    接口声明<br>rpc CreateTransaction2 (TransferContract) returns (TransactionExtention)　{};<br>38.2    提供节点<br>fullnode。<br>38.3    参数说明<br>TransferContract：包含提供方地址、接收方地址、金额，其中金额的单位为sun。<br>38.4    返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>38.5    功能说明<br>转账。创建一个转账的交易。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="39-更新账户2"><a href="#39-更新账户2" class="headerlink" title="39. 更新账户2"></a><h2 id="39">39. 更新账户2</h2></h2><p>39.1    接口声明<br>rpc UpdateAccount2 (AccountUpdateContract) returns (TransactionExtention){};<br>39.2    提供节点<br>fullnode。<br>39.3    参数说明<br>AccountUpdateContract：包含账户名称、账户地址。<br>39.4    返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>39.5    功能说明<br>更新账户名称。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="40-投票2"><a href="#40-投票2" class="headerlink" title="40. 投票2"></a><h2 id="40">40. 投票2</h2></h2><p>40.1    接口声明<br>rpc VoteWitnessAccount2 (VoteWitnessContract) returns (TransactionExtention){};<br>40.2    提供节点<br>fullnode。<br>40.3    参数说明<br>VoteWitnessContract：包含投票人地址和一个投票对象列表(最多不能超过30个投票对象)，包含候选人地址和投票数。<br>40.4    返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>40.5    功能说明<br>投票功能。只能对超级代表候选人进行投票，投票总数量不能大于账户锁定资金的数量，参见25 锁定资金。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="41-通证发行2"><a href="#41-通证发行2" class="headerlink" title="41. 通证发行2"></a><h2 id="41">41. 通证发行2</h2></h2><p>41.1    接口声明<br>rpc CreateAssetIssue2 (AssetIssueContract) returns (TransactionExtention) {};<br>41.2    提供节点<br>fullnode。<br>41.3    参数说明<br>AssetIssueContract：包含发行人地址、通证名称、总发行量、波场币vs通证汇兑比例、开始时间、结束时间、衰减率、投票分数、详细描述、url、每账户最多消耗带宽值，总带宽消耗值以及token冻结资产。<br>41.4    返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>41.5    功能说明<br>发行通证。所有人都可以发行通证，发行通证会消耗1024个trx。发行通证后，在有效期内任何人都可以参与通证发行，用trx按照比例兑换通证。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<ul>
<li>示例：</li>
</ul>
<p><code>assetissue password abc 1000000 1 1 2018-5-31 2018-6-30 abcdef a.com 1000 1000000 200000 180 300000 365</code> </p>
<p>以上命令的发行了名为abc的资产，发行总量为100万，abc与TRX的兑换比例为1:1，发行日期为2018-5-31至2018-6-30，描述为abcdef，网址为a.com，<br>每个账户每天的token转账最多消耗自己1000 bandwidth points，整个网络每天最多消耗自己1000000 bandwidth points。其中20万锁仓180天，30万锁仓365天。</p>
<h2 id="42-更新超级代表候选人信息2"><a href="#42-更新超级代表候选人信息2" class="headerlink" title="42. 更新超级代表候选人信息2"></a><h2 id="42">42. 更新超级代表候选人信息2</h2></h2><p>42.1 接口声明<br>rpc UpdateWitness2 (WitnessUpdateContract) returns (TransactionExtention) {};<br>42.2 提供节点<br>fullnode。<br>42.3 参数说明<br>WitnessUpdateContract：包含账户地址、Url。<br>42.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>42.5 功能说明<br>更新超级代表的url。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="43-创建账户2"><a href="#43-创建账户2" class="headerlink" title="43. 创建账户2"></a><h2 id="43">43. 创建账户2</h2></h2><p>43.1    接口声明<br>rpc CreateAccount2 (AccountCreateContract) returns (TransactionExtention){};<br>43.2    提供节点<br>fullnode。<br>43.3    参数说明<br>AccountCreateContract：包含账户类型、账户地址。<br>43.4    返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>43.5    功能说明<br>创建账号并写入区块链。应该先离线生成一个地址，再通过该API激活该地址。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="44-申请成为超级代表候选人2"><a href="#44-申请成为超级代表候选人2" class="headerlink" title="44. 申请成为超级代表候选人2"></a><h2 id="44">44. 申请成为超级代表候选人2</h2></h2><p>44.1 接口声明<br>rpc CreateWitness2 (WitnessCreateContract) returns (TransactionExtention) {};<br>44.2 提供节点<br>fullnode。<br>44.3 参数说明<br>WitnessCreateContract：包含账户地址、Url。<br>44.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>44.5 功能说明<br>每个波场用户都可以申请成为超级代表候选人。要求账户在区块链上已经创建。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="45-转让通证2"><a href="#45-转让通证2" class="headerlink" title="45. 转让通证2"></a><h2 id="45">45. 转让通证2</h2></h2><p>45.1 接口声明<br>rpc TransferAsset2 (TransferAssetContract) returns (TransactionExtention){};<br>45.2 提供节点<br>fullnode。<br>45.3 参数说明<br>TransferAssetContract：包含通证名称、提供方地址、接收方地址、通证数量。<br>45.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>45.5 功能说明<br>转让通证。创建一个转让通证的交易。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="46-参与通证发行2"><a href="#46-参与通证发行2" class="headerlink" title="46. 参与通证发行2"></a><h2 id="46">46. 参与通证发行2</h2></h2><p>46.1 接口声明<br>rpc ParticipateAssetIssue2 (ParticipateAssetIssueContract) returns (TransactionExtention){};<br>46.2 提供节点<br>fullnode。<br>46.3 参数说明<br>ParticipateAssetIssueContract：包含参与方地址、发行方地址、通证名称、参与金额，其中金额的单位为sun。<br>46.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>46.5 功能说明<br>参与通证发行。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="47-锁定资金2"><a href="#47-锁定资金2" class="headerlink" title="47. 锁定资金2"></a><h2 id="47">47. 锁定资金2</h2></h2><p>47.1 接口声明<br>rpc FreezeBalance2 (FreezeBalanceContract) returns (TransactionExtention) {};<br>47.2 提供节点<br>fullnode。<br>47.3 参数说明<br>FreezeBalanceContract：包含地址、锁定资金、锁定时间。目前锁定时间只能是3天。<br>47.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>47.5 功能说明<br>锁定资金将带来两个收益：<br>a.获得带宽。<br>b.获得投票的权利。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="48-解除资金锁定2"><a href="#48-解除资金锁定2" class="headerlink" title="48. 解除资金锁定2"></a><h2 id="48">48. 解除资金锁定2</h2></h2><p>48.1 接口声明<br>rpc UnfreezeBalance2 (UnfreezeBalanceContract) returns (TransactionExtention) {};<br>48.2 提供节点<br>fullnode。<br>48.3 参数说明<br>UnfreezeBalanceContract：包含地址。<br>48.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>48.5 功能说明<br>锁定资金3天之后才允许解除锁定。解除锁定，将清除投票记录和带宽。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="49-解冻通证2"><a href="#49-解冻通证2" class="headerlink" title="49. 解冻通证2"></a><h2 id="49">49. 解冻通证2</h2></h2><p>49.1 接口声明<br>rpc UnfreezeAsset2 (UnfreezeAssetContract) returns (TransactionExtention) {};<br>49.2 提供节点<br>fullnode。<br>49.3 参数说明<br>UnfreezeAssetContract：包含地址。<br>49.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>49.5 功能说明<br>通证发行者解冻发行时冻结的通证。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="50-赎回出块奖励2"><a href="#50-赎回出块奖励2" class="headerlink" title="50. 赎回出块奖励2"></a><h2 id="50">50. 赎回出块奖励2</h2></h2><p>50.1 接口声明<br>rpc WithdrawBalance2 (WithdrawBalanceContract) returns (TransactionExtention) {};<br>50.2 提供节点<br>fullnode。<br>50.3 参数说明<br>WithdrawBalanceContract：包含地址。<br>50.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>50.5 功能说明<br>本接口仅提供给超级代表。超级代表记账成功后，将获得奖励，奖励不直接增加到账户余额上。每24小时允许提取一次到账户余额。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="51-更新通证2"><a href="#51-更新通证2" class="headerlink" title="51.  更新通证2"></a><h2 id="51">51.  更新通证2</h2></h2><p>51.1 接口声明<br>rpc UpdateAsset2 (UpdateAssetContract) returns (TransactionExtention) {};<br>51.2 提供节点<br>fullnode。<br>51.3 参数说明<br>UpdateAssetContract：包括通证发行者的地址、通证的描述、通证的url、每账户最多消耗带宽值、总带宽消耗值<br>51.4 返回值<br>TransactionExtention：返回交易、交易ID、操作结果等。钱包对交易签名后再请求广播交易。<br>51.5 功能说明<br>只能由通证发行者发起，更新通证的描述、通证的url、每账户最多消耗带宽值、总带宽消耗值<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="52-获取当前区块2"><a href="#52-获取当前区块2" class="headerlink" title="52. 获取当前区块2"></a><h2 id="52">52. 获取当前区块2</h2></h2><p>52.1 接口声明<br>rpc GetNowBlock2 (EmptyMessage) returns (BlockExtention) {};<br>52.2 提供节点<br>fullnode、soliditynode。<br>52.3 参数说明<br>EmptyMessage：空。<br>52.4 返回值<br>BlockExtention：当前区块信息，包含区块id。<br>52.5 功能说明<br>获取当前最新的区块。</p>
<h2 id="53-按照高度获取区块2"><a href="#53-按照高度获取区块2" class="headerlink" title="53. 按照高度获取区块2"></a><h2 id="53">53. 按照高度获取区块2</h2></h2><p>53.1 接口声明<br>rpc GetBlockByNum2 (NumberMessage) returns (BlockExtention) {};<br>53.2 提供节点<br>fullnode、soliditynode。<br>53.3 参数说明<br>NumberMessage：区块高度。<br>53.4 返回值<br>BlockExtention：区块信息，包含区块id。<br>53.5 功能说明<br>获取指定高度的区块，如果找不到则返回创世区块。</p>
<h2 id="54-分页获取区块2"><a href="#54-分页获取区块2" class="headerlink" title="54. 分页获取区块2"></a><h2 id="54">54. 分页获取区块2</h2></h2><p>54.1 接口声明<br>rpc GetBlockByLimitNext2 (BlockLimit) returns (BlockListExtention) {};<br>54.2 提供节点<br>fullnode<br>54.3 参数说明<br>BlockLimit：区块起止范围。<br>54.4 返回值<br>BlockListExtention：区块列表。<br>54.5 功能说明<br>根据范围查询区块，用与分页查询所有区块。</p>
<h2 id="55-查询最后区块2"><a href="#55-查询最后区块2" class="headerlink" title="55. 查询最后区块2"></a><h2 id="55">55. 查询最后区块2</h2></h2><p>55.1 接口声明<br>rpc GetBlockByLatestNum2 (NumberMessage) returns (BlockListExtention) {};<br>55.2 提供节点<br>fullnode<br>55.3 参数说明<br>NumberMessage：需要查询的区块数量。<br>55.4 返回值<br>BlockListExtention：区块列表。<br>55.5 功能说明<br>查询最后的一定数量的区块。</p>
<h2 id="56-对交易进行签名2"><a href="#56-对交易进行签名2" class="headerlink" title="56. 对交易进行签名2"></a><h2 id="56">56. 对交易进行签名2</h2></h2><p>56.1 接口说明<br>rpc GetTransactionSign2 (TransactionSign) returns (TransactionExtention) {};<br>56.2 提供节点<br>fullnode<br>56.3 参数说明<br>TransactionSign：待签名Transaction对象和签名用的private key<br>56.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>56.5    功能说明<br>使用API对交易进行签名。<br>注意，凡带xxx2的接口，与xxx接口功能相同，只是返回值增加更详细的提示。如果result的result值为false，则message为错误提示，transaction和txid字段忽略。constant_result只和职能合约调用有关，其他交易忽略。</p>
<h2 id="57-通过地址查询所有发起交易2"><a href="#57-通过地址查询所有发起交易2" class="headerlink" title="57. 通过地址查询所有发起交易2"></a><h2 id="57">57. 通过地址查询所有发起交易2</h2></h2><p>57.1 接口声明<br>GetTransactionsFromThis2 (AccountPaginated) returns (TransactionListExtention) {};<br>57.2 提供节点<br>soliditynode。<br>57.3 参数说明<br>AccountPaginated：发起方账户地址及查询范围。<br>57.4 返回值<br>TransactionListExtention：交易列表。<br>57.5 功能说明<br>通过账户地址查询所有发起的交易。</p>
<h2 id="58-通过地址查询所有接收交易2"><a href="#58-通过地址查询所有接收交易2" class="headerlink" title="58. 通过地址查询所有接收交易2"></a><h2 id="58">58. 通过地址查询所有接收交易2</h2></h2><p>58.1 接口声明<br>rpc GetTransactionsFromThis2 (AccountPaginated) returns (TransactionListExtention) {};<br>58.2 提供节点<br>soliditynode。<br>58.3 参数说明<br>AccountPaginated：发起方账户地址及查询范围。<br>58.4 返回值<br>TransactionListExtention：交易列表。<br>58.5 功能说明<br>通过账户地址查询所有其它账户发起和本账户有关的交易。</p>
<h2 id="59-创建交易对"><a href="#59-创建交易对" class="headerlink" title="59. 创建交易对"></a><h2 id="59">59. 创建交易对</h2></h2><p>59.1 接口声明<br>rpc ExchangeCreate (ExchangeCreateContract) returns (TransactionExtention) {};<br>59.2 提供节点<br>fullnode。<br>59.3 参数说明<br>first_token_id，第1种token的id<br>first_token_balance，第1种token的balance<br>second_token_id，第2种token的id<br>second_token_balance，第2种token的balance<br>59.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>59.5 功能说明<br>创建交易对</p>
<h2 id="60-交易所注资"><a href="#60-交易所注资" class="headerlink" title="60. 交易所注资"></a><h2 id="60">60. 交易所注资</h2></h2><p>60.1 接口声明<br>rpc ExchangeInject (ExchangeInjectContract) returns (TransactionExtention) {};<br>60.2 提供节点<br>fullnode。<br>60.3 参数说明<br>exchange_id：交易对id<br>token_id：注资的token的id<br>quant：注资数量<br>60.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>60.5 功能说明<br>对交易对进行注资</p>
<h2 id="61-交易所撤资"><a href="#61-交易所撤资" class="headerlink" title="61. 交易所撤资"></a><h2 id="61">61. 交易所撤资</h2></h2><p>61.1 接口声明<br>rpc ExchangeWithdraw (ExchangeWithdrawContract) returns (TransactionExtention) {};<br>61.2 提供节点<br>fullnode。<br>61.3 参数说明<br>exchange_id：交易对id<br>token_id：撤资的token的id<br>quant：撤资数量<br>61.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>61.5 功能说明<br>对交易对进行撤资</p>
<h2 id="62-交易所交易"><a href="#62-交易所交易" class="headerlink" title="62. 交易所交易"></a><h2 id="62">62. 交易所交易</h2></h2><p>62.1 接口声明<br>rpc ExchangeTransaction (ExchangeTransactionContract) returns (TransactionExtention) {};<br>62.2 提供节点<br>fullnode。<br>62.3 参数说明<br>exchange_id：交易对id<br>token_id：撤资的token的id<br>quant：撤资数量<br>expected：期望得到的另一个token的最小金额<br>62.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>62.5 功能说明<br>交易</p>
<h2 id="63-查询所有交易对"><a href="#63-查询所有交易对" class="headerlink" title="63. 查询所有交易对"></a><h2 id="63">63. 查询所有交易对</h2></h2><p>63.1 接口声明<br>rpc ListExchanges (EmptyMessage) returns (ExchangeList) {};<br>63.2 提供节点<br>fullnode。<br>63.3 参数说明<br>无<br>63.4 返回值<br>ExchangeList：所有交易对。<br>63.5 功能说明 </p>
<h2 id="64-查询指定交易对"><a href="#64-查询指定交易对" class="headerlink" title="64. 查询指定交易对"></a><h2 id="64">64. 查询指定交易对</h2></h2><p>64.1 接口声明<br>rpc GetExchangeById (BytesMessage) returns (Exchange) {};<br>64.2 提供节点<br>fullnode。<br>64.3 参数说明<br>value：交易对id<br>64.4 返回值<br>Exchange：交易对。<br>64.5 功能说明 </p>
<h2 id="65-分页查询交易对"><a href="#65-分页查询交易对" class="headerlink" title="65. 分页查询交易对"></a><h2 id="65">65. 分页查询交易对</h2></h2><p>65.1 接口声明<br>rpc GetPaginatedExchangeList (PaginatedMessage) returns (ExchangeList) {};<br>65.2 提供节点<br>fullnode。<br>65.3 参数说明<br>offset：偏移量<br>limit：个数限制<br>65.4 返回值<br>Exchange：交易对。<br>65.5 功能说明 </p>
<h2 id="66-创建提议"><a href="#66-创建提议" class="headerlink" title="66. 创建提议"></a><h2 id="66">66. 创建提议</h2></h2><p>66.1 接口声明<br>rpc ProposalCreate (ProposalCreateContract) returns (TransactionExtention) {};<br>66.2 提供节点<br>fullnode。<br>66.3 参数说明<br>parameters：提议参数<br>66.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>66.5 功能说明 </p>
<h2 id="67-赞成提议"><a href="#67-赞成提议" class="headerlink" title="67. 赞成提议"></a><h2 id="67">67. 赞成提议</h2></h2><p>67.1 接口声明<br>rpc ProposalApprove (ProposalApproveContract) returns (TransactionExtention) {};<br>67.2 提供节点<br>fullnode。<br>67.3 参数说明<br>proposal_id ：提议id<br>is_add_approval ：赞成或取消赞成<br>67.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>67.5 功能说明 </p>
<h2 id="68-删除提议"><a href="#68-删除提议" class="headerlink" title="68. 删除提议"></a><h2 id="68">68. 删除提议</h2></h2><p>68.1 接口声明<br>rpc ProposalDelete (ProposalDeleteContract) returns (TransactionExtention) {};<br>68.2 提供节点<br>fullnode。<br>68.3 参数说明<br>proposal_id ：提议id<br>68.4 返回值<br>TransactionExtention：返回签名后的交易、交易ID、操作结果等。<br>68.5 功能说明 </p>
<h2 id="69-查询所有提议"><a href="#69-查询所有提议" class="headerlink" title="69. 查询所有提议"></a><h2 id="69">69. 查询所有提议</h2></h2><p>69.1 接口声明<br>rpc ListProposals (EmptyMessage) returns (ProposalList) {};<br>69.2 提供节点<br>fullnode。<br>69.3 参数说明<br>无<br>69.4 返回值<br>ProposalList：提议列表<br>69.5 功能说明 </p>
<h2 id="70-分页查询提议"><a href="#70-分页查询提议" class="headerlink" title="70. 分页查询提议"></a><h2 id="70">70. 分页查询提议</h2></h2><p>70.1 接口声明<br>rpc GetPaginatedProposalList (PaginatedMessage) returns (ProposalList) {};<br>70.2 提供节点<br>fullnode。<br>70.3 参数说明<br>offset：偏移量<br>limit：个数限制<br>70.4 返回值<br>ProposalList：提议列表<br>70.5 功能说明 </p>
<h2 id="71-查询指定提议"><a href="#71-查询指定提议" class="headerlink" title="71. 查询指定提议"></a><h2 id="71">71. 查询指定提议</h2></h2><p>71.1 接口声明<br>rpc GetProposalById (BytesMessage) returns (Proposal) {};<br>71.2 提供节点<br>fullnode。<br>71.3 参数说明<br>proposal_id ：提议id<br>71.4 返回值<br>ProposalList：提议列表<br>71.5 功能说明 </p>
<h2 id="72-查询资源委派账户索引"><a href="#72-查询资源委派账户索引" class="headerlink" title="72. 查询资源委派账户索引"></a><h2 id="72">72. 查询资源委派账户索引</h2></h2><p>72.1 接口声明<br>rpc GetDelegatedResourceAccountIndex (BytesMessage) returns (DelegatedResourceAccountIndex) { };\<br>72.2 提供节点<br>fullnode。<br>72.3 参数说明<br>BytesMessage ：查询的账户地址\<br>72.4 返回值<br>account：查询的地址 \<br>fromAccounts：从哪些账户中获得了资源 \<br>toAccounts：给哪些账户中委派了资源\<br>72.5 功能说明 </p>
<h2 id="73-查询资源委派的详细信息"><a href="#73-查询资源委派的详细信息" class="headerlink" title="73. 查询资源委派的详细信息"></a><h2 id="73">73. 查询资源委派的详细信息</h2></h2><p>73.1 接口声明<br>rpc GetDelegatedResource (DelegatedResourceMessage) returns (DelegatedResourceList) {<br>  };\<br>73.2 提供节点<br>fullnode。<br>73.3 参数说明<br>fromAddress ：资源委派发起地址 \<br>toAddress ：资源委派接受地址\<br>73.4 返回值<br>DelegatedResourceList:只包含一个元素 \<br>from:发起资源委派的地址\<br>to:接受资源委派的地址\<br>frozen_balance_for_bandwidth:委派的带宽\<br>frozen_balance_for_energy:委派的energy\<br>expire_time_for_bandwidth:委派的带宽解冻时间\<br>expire_time_for_energy:委派的energy解冻时间\<br>73.5 功能说明  </p>
<h2 id="74-通证快捷转账"><a href="#74-通证快捷转账" class="headerlink" title="74. 通证快捷转账"></a><h2 id="74">74. 通证快捷转账</h2></h2><p>74.1 接口说明<br>rpc EasyTransferAsset (EasyTransferAssetMessage) returns (EasyTransferResponse) {};<br>74.2 提供节点<br>fullnode<br>74.3 参数说明<br>EasyTransferAssetMessage：转账用的密码，toAddress，通证ID，转账的数量<br>74.4 返回值<br>EasyTransferResponse：转账创建的transaction，交易ID，以及广播的结果result</p>
<h2 id="75-通证快捷转账（通过私钥）"><a href="#75-通证快捷转账（通过私钥）" class="headerlink" title="75. 通证快捷转账（通过私钥）"></a><h2 id="75">75. 通证快捷转账（通过私钥）</h2></h2><p>75.1 接口说明<br>rpc EasyTransferAssetByPrivate (EasyTransferAssetByPrivateMessage) returns (EasyTransferResponse) {};<br>75.2 提供节点<br>fullnode<br>75.3 参数说明<br>EasyTransferAssetByPrivateMessage：转账用的私钥，toAddress，通证ID，转账的数量<br>75.4 返回值<br>EasyTransferResponse：转账创建的transaction，交易ID，以及广播的结果result</p>
<h2 id="76-更新用户权限（用于多重签名）"><a href="#76-更新用户权限（用于多重签名）" class="headerlink" title="76. 更新用户权限（用于多重签名）"></a><h2 id="76">76. 更新用户权限（用于多重签名）</h2></h2><p>76.1 接口说明<br>rpc AccountPermissionUpdate (AccountPermissionUpdateContract) returns (TransactionExtention)  {}\<br>76.2 提供节点<br>fullnode<br>76.3 参数说明<br>owner_address：待修改权限的账户的地址\<br>owner：修改后的 owner 权限\<br>witness：修改后的 witness 权限（如果是 witness ）\<br>actives：修改后的 actives 权限</p>
<p>76.4 返回值<br>TransactionExtention：转账创建的transaction，交易ID，以及广播的结果result</p>
<h2 id="77-增加签名（用于多重签名）"><a href="#77-增加签名（用于多重签名）" class="headerlink" title="77. 增加签名（用于多重签名）"></a><h2 id="77">77. 增加签名（用于多重签名）</h2></h2><p>77.1 接口说明<br>rpc AddSign (TransactionSign) returns (TransactionExtention) {}\<br>77.2 提供节点<br>fullnode<br>77.3 参数说明<br>TransactionSign：交易，私钥<br>77.4 返回值<br>TransactionExtention：转账创建的transaction，交易ID，以及广播的结果result</p>
<h2 id="78-查询已签名地址（用于多重签名）"><a href="#78-查询已签名地址（用于多重签名）" class="headerlink" title="78. 查询已签名地址（用于多重签名）"></a><h2 id="78">78. 查询已签名地址（用于多重签名）</h2></h2><p>78.1 接口说明<br>rpc GetTransactionApprovedList(Transaction) returns (TransactionApprovedList)   {}\<br>78.2 提供节点<br>fullnode<br>78.3 参数说明<br>Transaction：交易\<br>78.4 返回值<br>TransactionApprovedList：已签名的地址，交易</p>
<h2 id="79-查询交易签名权重（用于多重签名）"><a href="#79-查询交易签名权重（用于多重签名）" class="headerlink" title="79. 查询交易签名权重（用于多重签名）"></a><h2 id="79">79. 查询交易签名权重（用于多重签名）</h2></h2><p>79.1 接口说明<br>rpc GetTransactionSignWeight (Transaction) returns (TransactionSignWeight) {}\<br>79.2 提供节点<br>fullnode<br>79.3 参数说明<br>Transaction：交易\<br>79.4 返回值<br>TransactionSignWeight：结果result（交易的签名是否满足权限阈值）</p>
<h2 id="80-部署智能合约"><a href="#80-部署智能合约" class="headerlink" title="80. 部署智能合约"></a><h2 id="80">80. 部署智能合约</h2></h2><p>80.1 接口说明<br>rpc DeployContract (CreateSmartContract) returns (TransactionExtention) {};\<br>80.2 提供节点<br>fullnode<br>80.3 参数说明<br>CreateSmartContract：提供创建合约信息的交易类型对象，包含owner_address(交易发送者地址), new_contract（SmartContract类型对象）, call_token_value(trc10), token_id(trc10) 4个参数\<br>附new_contract: smartcontract信息，包括，origin_address（合约部署者地址）， contract_address（合约地址，默认为空），abi，bytecode，call_value（trx放入合约数量），consume_user_resource_percent（调用合约时用户方需支付的energy占所有花费比例）， name（合约名字）， origin_energy_limit（开发者愿意帮助用户支付的最高energy数量) \<br>80.4 返回值<br>TransactionExtention：展示交易执行结果的信息类型对象，包含transaction, transaction_id, constant_result 以及 on-block result.</p>
<h2 id="81-执行智能合约"><a href="#81-执行智能合约" class="headerlink" title="81. 执行智能合约"></a><h2 id="81">81. 执行智能合约</h2></h2><p>81.1 接口说明<br>rpc TriggerContract (TriggerSmartContract) returns (TransactionExtention) {};\<br>81.2 提供节点<br>fullnode<br>81.3 参数说明<br>TriggerSmartContract：提供执行合约信息的交易类型对象，包含owner_address(交易发送者地址), contract_address, call_value(随交易打入合约的trx数量), data(被调用的方法的签名及参数), call_token_value(trc10数量), token_id(trc10 id) 6个参数\<br>81.4 返回值<br>TransactionExtention：展示交易执行结果的信息类型对象，包含transaction, transaction_id, constant_result 以及 on-block result.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/波场钱包RPC-API/" data-id="cjxcwb0ug000rsffm7iyzfbu2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场协议/">波场协议</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tron/波场手册" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/05/tron/波场手册/" class="article-date">
  <time datetime="2019-06-05T10:38:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/tron/波场手册/">波场手册</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="TRON"><a href="#TRON" class="headerlink" title="TRON"></a>TRON</h1><h2 id="核心架构"><a href="#核心架构" class="headerlink" title="核心架构"></a>核心架构</h2><p><img src="https://raw.githubusercontent.com/ybhgenius/Documentation/master/images/Architecture.png" alt=""></p>
<p>TRON采用了三层体系架构，分别为存储层，核心层和应用层。</p>
<ul>
<li><p>存储层 </p>
<p>  TRON的技术团队为TRON设计了独特的分布式存储协议，包括区块存储和状态存储。<br>  在存储层的设计中，TRON引入了图数据库的思想，来更便捷的满足现实世界多样性数据存储的需求。</p>
</li>
<li><p>核心层</p>
<p>  TRON包含智能合约，账户管理，共识等模块。TRON将会实现基于堆栈式的虚拟机，并且采用优化过的指令集。<br>  为了让开发者更好的开发DApp，TRON采用Java语言作为合约语言，后续会加入更多的高级语言支持。<br>  另外为了满足TRON独特的需求，TRON的共识机制在DPOS基础上做了一定的创新。</p>
</li>
<li><p>应用层</p>
<p>  开发者可以使用接口来方便的实现丰富的DApp和个性化钱包。<br>  波场的协议完全使用google protobuf来定义，天然的支持多语言扩展。</p>
</li>
</ul>
<h2 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h2><ul>
<li><p>基于DPOS改良过的共识机制</p>
<p>  POW共识机制一直存在浪费资源、效率低下、TPS不高的问题。这些都与TRON的价值观、定位不吻合。基于我们的设计理念，为了真正实现能用于日常场景的区块链平台，我们选择了POS机制作为TRON的共识机制的基调。TRON的共识机制从DPOS出发。在调查了现有领域的优秀改进想法后，我们对DPOS机制作出改进，以达到我们的需求，从而确定了TRON的共识。</p>
</li>
<li><p>共识机制基本原则</p>
<ul>
<li>用户会根据自己手里的具有可投票权的币持有量做出带有权重的投票，根据投票结果，按照一定的规则选择出当前的区块生成节点。参照的规则会尽可能的保证区块的生成速度与打包节点数量之间的平衡性。</li>
<li>同时，落选的打包节点、投票给中选者的用户、投票给落选者的用户均可能获得一定量的补偿，以激励他们持续参与之后的竞选流程。</li>
<li>中选节点会按照一定的分配规则依次进行区块的打包并获得最大份额的奖励。</li>
<li>中选节点中的多数会根据投票结果进行选择，剩下的会按照一定的算法保证在余下的其他节点中，所有节点都有可能被选中。</li>
</ul>
</li>
</ul>
<h2 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h2><ul>
<li><p>KhaosDB</p>
<p>  TRON采用的KhaosDB会存储一定时间内所有新产生的分叉链。当发生需要切换主链的情况时，在KhaosDB的支持下，验证节点可以快速切换有效链到新的主链。</p>
</li>
<li><p>Level DB</p>
<p>  为了同时满足存取速度和快速开发的需求，TRON会在开发初期采用Level DB。在主网上线后，TRON将会根据实际需求进行数据库的升级，使得TRON具有完全量身定制的数据库。</p>
</li>
</ul>
<h2 id="数字资产模块"><a href="#数字资产模块" class="headerlink" title="数字资产模块"></a>数字资产模块</h2><ul>
<li><p>配置</p>
<p>  数字资产配置。通过该模块，用户可以按照自己的意愿进行自定义的数字资产的定制。<br>  可定制的参数包括但不限于资产的名称、缩写、LOGO、总的发行量、TRX兑换比例，开始时间、 结束时间、兑换比例衰减系数、是否可增发、增发形式（一定数目或者一定比率）、增发周期、描述等。<br>  用户也可以选择不进行参数的配置。系统会为用户配置默认的参数。</p>
</li>
<li><p>发布/部署</p>
<p>  参数配置完成后（人为或者系统默认），用户即可选择发布资产。<br>  对配置好的并通过验证的数字资产进行部署的各种操作、功能。<br>  通过见证节点的验证后，自定义资产就完成了部署。完成部署的资产可以自由的在TRON网络上流通。</p>
</li>
<li><p>API<br>  API接口主要用于支持客户端的开发。开发者可以在API接口的支持下，开发完全由自己设计的资产发布平台。</p>
</li>
</ul>
<h2 id="智能合约-虚拟机"><a href="#智能合约-虚拟机" class="headerlink" title="智能合约/虚拟机"></a>智能合约/虚拟机</h2><p>TRON包含智能合约模块，用户可以开发自己的智能合约，从而定制化的满足用户需求。<br>智能合约会运行在虚拟机上，TRON将会实现自己的虚拟机，开发者们可以实现复杂多样的功能，满足定制化需求 。</p>
<h2 id="第三方应用"><a href="#第三方应用" class="headerlink" title="第三方应用"></a>第三方应用</h2><ul>
<li><p>数字资产部署平台</p>
<p>  TRON会允许第三方开发自己的平台，并接入TRON网络。利用TRON的数字资产模块进行，第三方平台的用户也可以自行定义自己的数字资产。</p>
</li>
<li><p>钱包</p>
<p>  可以用于查看TRX及用户持有的其他资产的信息，发起或者接受交易等。</p>
</li>
<li><p>区块链浏览器</p>
<p>  查看整个TRON的区块记录，节点名单，节点部署、实时运行情况等。</p>
</li>
</ul>
<h2 id="令牌迁移"><a href="#令牌迁移" class="headerlink" title="令牌迁移"></a>令牌迁移</h2><p>在TRON网络主网正式部署前，波场基金会会组织由目前的基于以太坊ERC20的令牌向正式的TRON主网代币TRX的迁移，迁移兑换比例为1：1。具体的迁移方式待定，并可能在正式执行前进行细节上的修改。</p>
<p>##社区计划</p>
<p>社区是一个区块链项目的重要组成部分。我们希望能够激励社区成员的热情，使得所有人充分的参与到波场的建设中来。这也是我们从项目伊始就确定下来，从未改变过的想法。<br>社区成员有多种途径能够参与到波场项目中来。广大的开发者可以参与到波场核心的代码编写中来，也可以在我们开放API后进行第三方应用的开发。另外我们还会不定期组织一些竞赛活动，向所有的网络用户征稿，包括但不限于LOGO设计、文章、海报、编程竞赛等形式。</p>
<ul>
<li><p>提交类型</p>
<ul>
<li>feat: 新的功能。</li>
<li>fix: 漏洞修复。</li>
<li>docs: 文档类修改。</li>
<li>perf: 能够提高性能的代码修改。</li>
<li>refactor: 重构（既不添加新功能也不修复漏洞的代码改变）。</li>
<li>style: 文本格式修改(多余的空白, 格式校对, 标点符号遗漏等)。</li>
<li>test: 添加缺失的测试用例、修改现存测试用例。</li>
</ul>
</li>
<li><p>奖励计划    </p>
</li>
</ul>
<p>我们会对为TRON网络及社区的推进、发展做出贡献的人给与奖励。我们会成立一个委员会对所有的贡献者进行详细的评估，根据评估结果给与对应数量的TRX代币、礼品等多种形式的奖励。</p>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>TRON使用Google protobuf协议，协议内容涉及到账户，区块，传输多个层面。</p>
<p>账户有基本账户、资产发布账户和合约账户三种类型。一个账户包含，账户名称，账户类型，地址，余额，投票，其他资产6种属性。</p>
<p>更进一步的，基本账户可以申请成为验证节点，验证节点具有额外的属性，投票统计数目，公钥，URL，以及历史表现等参数。</p>
<p>一个区块由区块头和多笔交易构成。区块头包含时间戳，交易字典树的根，父哈希，签名等区块基本信息。</p>
<p>交易合约有多种类型，包括账户创建合约、转账合约、资产转账合约、资产投票合约、见证节点投票合约、见证节点创建合约、资产发布合约、部署合约8种类型。</p>
<p>每一个交易还包含多个输入与多个输出，以及其他一些相关属性。</p>
<p>其中交易内的输入，交易本身，区块头均需签名。</p>
<p>传输涉及的协议Inventory主要用于传输中告知接收方传输数据的清单。</p>
<p>详细的协议见附属文件。详细协议随着程序的迭代随时都可能发生变化，请以最新的版本为准。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.trxbi.com/2019/06/05/tron/波场手册/" data-id="cjxcwb0u9000fsffmcinicyl2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/波场介绍/">波场介绍</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">next&raquo;</a>
  </nav>
</section>
        
          
            <aside id="sidebar">
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget recents">
      <ul>
        
          <li>
            <a href="/2019/06/05/tron/波场去中心化交易所/">波场去中心化交易所</a>
          </li>
        
          <li>
            <a href="/2019/06/05/buffett/">致社区的一封公开信：沃伦 · 巴菲特慈善午宴</a>
          </li>
        
          <li>
            <a href="/2019/06/05/tron/One_Page/">波场介绍</a>
          </li>
        
          <li>
            <a href="/2019/06/05/tron/交易操作类型说明/">交易操作类型说明</a>
          </li>
        
          <li>
            <a href="/2019/06/05/tron/创建账户/">创建账户</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/波场介绍/" style="font-size: 10px;">波场介绍</a> <a href="/tags/波场协议/" style="font-size: 20px;">波场协议</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">16</span></li></ul>
    </div>
  </div>

  
</aside>
          
        
      </div>
      <div id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"></a><br>
      &copy; 2019 TRX币<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</div>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="https://www.huobi.co/zh-cn/topic/invited/?invite_code=34sb3" class="mobile-nav-link">买币</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

    <a href='#logo' id='btn-btt'>^</a>
  </div>
</body>
</html>